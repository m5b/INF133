
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Node.js version support &#8212; INF 133 Fall 2023</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../_static/logo_stacked.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">INF 133 Fall 2023</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../index.html">
                    User Interaction Software
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Assignments
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/a0.html">
   Assignment 0
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/a1.html">
   Assignment 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/a2.html">
   Assignment 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/a3.html">
   Assignment 3
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/a4.html">
   Assignment 4
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/a5.html">
   Assignment 5
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Weekly Notes
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk1.html">
   Week 1 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk2.html">
   Week 2 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk3.html">
   Week 3 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk4.html">
   Week 4 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk5.html">
   Week 5 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk6.html">
   Week 6 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk7.html">
   Week 7 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk8.html">
   Week 8 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk9.html">
   Week 9 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk10.html">
   Week 10 Notes
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Course Resources
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../resources.html">
   Resources
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../_sources/reveal/node_modules/clean-css/README.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Node.js version support
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install">
   Install
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#use">
   Use
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#important-4-0-breaking-changes">
     Important: 4.0 breaking changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-s-new-in-version-4-1">
     What’s new in version 4.1
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-s-new-in-version-4-2">
     What’s new in version 4.2
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#constructor-options">
     Constructor options
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#compatibility-modes">
     Compatibility modes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#fetch-option">
     Fetch option
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#formatting-options">
     Formatting options
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#inlining-options">
     Inlining options
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#optimization-levels">
     Optimization levels
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#level-0-optimizations">
       Level 0 optimizations
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#level-1-optimizations">
       Level 1 optimizations
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#level-2-optimizations">
       Level 2 optimizations
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#minify-method">
     Minify method
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#promise-interface">
     Promise interface
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cli-utility">
     CLI utility
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#faq">
   FAQ
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-optimize-multiple-files">
     How to optimize multiple files?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-process-remote-imports-correctly">
     How to process remote
     <code class="docutils literal notranslate">
      <span class="pre">
       @import
      </span>
     </code>
     s correctly?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-apply-arbitrary-transformations-to-css-properties">
     How to apply arbitrary transformations to CSS properties?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-specify-a-custom-rounding-precision">
     How to specify a custom rounding precision?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-keep-a-css-fragment-intact">
     How to keep a CSS fragment intact?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-preserve-a-comment-block">
     How to preserve a comment block?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-rebase-relative-image-urls">
     How to rebase relative image URLs?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-work-with-source-maps">
     How to work with source maps?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-apply-level-1-2-optimizations-at-the-same-time">
     How to apply level 1 &amp; 2 optimizations at the same time?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-level-2-optimizations-do">
     What level 2 optimizations do?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-use-clean-css-with-build-tools">
     How to use clean-css with build tools?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-use-clean-css-from-web-browser">
     How to use clean-css from web browser?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contributing">
   Contributing
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-get-started">
     How to get started?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#acknowledgments">
   Acknowledgments
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#license">
   License
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Node.js version support</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Node.js version support
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install">
   Install
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#use">
   Use
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#important-4-0-breaking-changes">
     Important: 4.0 breaking changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-s-new-in-version-4-1">
     What’s new in version 4.1
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-s-new-in-version-4-2">
     What’s new in version 4.2
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#constructor-options">
     Constructor options
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#compatibility-modes">
     Compatibility modes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#fetch-option">
     Fetch option
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#formatting-options">
     Formatting options
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#inlining-options">
     Inlining options
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#optimization-levels">
     Optimization levels
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#level-0-optimizations">
       Level 0 optimizations
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#level-1-optimizations">
       Level 1 optimizations
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#level-2-optimizations">
       Level 2 optimizations
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#minify-method">
     Minify method
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#promise-interface">
     Promise interface
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cli-utility">
     CLI utility
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#faq">
   FAQ
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-optimize-multiple-files">
     How to optimize multiple files?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-process-remote-imports-correctly">
     How to process remote
     <code class="docutils literal notranslate">
      <span class="pre">
       @import
      </span>
     </code>
     s correctly?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-apply-arbitrary-transformations-to-css-properties">
     How to apply arbitrary transformations to CSS properties?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-specify-a-custom-rounding-precision">
     How to specify a custom rounding precision?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-keep-a-css-fragment-intact">
     How to keep a CSS fragment intact?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-preserve-a-comment-block">
     How to preserve a comment block?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-rebase-relative-image-urls">
     How to rebase relative image URLs?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-work-with-source-maps">
     How to work with source maps?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-apply-level-1-2-optimizations-at-the-same-time">
     How to apply level 1 &amp; 2 optimizations at the same time?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-level-2-optimizations-do">
     What level 2 optimizations do?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-use-clean-css-with-build-tools">
     How to use clean-css with build tools?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-use-clean-css-from-web-browser">
     How to use clean-css from web browser?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contributing">
   Contributing
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-get-started">
     How to get started?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#acknowledgments">
   Acknowledgments
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#license">
   License
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <h1 align="center">
  <br/>
  <img src="https://cdn.rawgit.com/jakubpawlowicz/clean-css/master/logo.v2.svg" alt="clean-css logo" width="525px"/>
  <br/>
  <br/>
</h1>
<p><a class="reference external" href="https://www.npmjs.com/package/clean-css"><img alt="NPM version" src="https://img.shields.io/npm/v/clean-css.svg?style=flat" /></a>
<a class="reference external" href="https://travis-ci.org/jakubpawlowicz/clean-css"><img alt="Linux Build Status" src="https://img.shields.io/travis/jakubpawlowicz/clean-css/master.svg?style=flat&amp;label=Linux%20build" /></a>
<a class="reference external" href="https://ci.appveyor.com/project/jakubpawlowicz/clean-css/branch/master"><img alt="Windows Build status" src="https://img.shields.io/appveyor/ci/jakubpawlowicz/clean-css/master.svg?style=flat&amp;label=Windows%20build" /></a>
<a class="reference external" href="https://david-dm.org/jakubpawlowicz/clean-css"><img alt="Dependency Status" src="https://img.shields.io/david/jakubpawlowicz/clean-css.svg?style=flat" /></a>
<a class="reference external" href="https://npmcharts.com/compare/clean-css?minimal=true"><img alt="NPM Downloads" src="https://img.shields.io/npm/dm/clean-css.svg" /></a>
<a class="reference external" href="https://twitter.com/cleancss"><img alt="Twitter" src="https://img.shields.io/badge/Twitter-&#64;cleancss-blue.svg" /></a></p>
<p>clean-css is a fast and efficient CSS optimizer for <a class="reference external" href="http://nodejs.org/">Node.js</a> platform and <a class="reference external" href="https://jakubpawlowicz.github.io/clean-css">any modern browser</a>.</p>
<p>According to <a class="reference external" href="http://goalsmashers.github.io/css-minification-benchmark/">tests</a> it is one of the best available.</p>
<p><strong>Table of Contents</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="#nodejs-version-support">Node.js version support</a></p></li>
<li><p><a class="reference external" href="#install">Install</a></p></li>
<li><p><a class="reference external" href="#use">Use</a></p>
<ul>
<li><p><a class="reference external" href="#important-40-breaking-changes">Important: 4.0 breaking changes</a></p></li>
<li><p><a class="reference external" href="#whats-new-in-version-41">What’s new in version 4.1</a></p></li>
<li><p><a class="reference external" href="#whats-new-in-version-42">What’s new in version 4.2</a></p></li>
<li><p><a class="reference external" href="#constructor-options">Constructor options</a></p></li>
<li><p><a class="reference external" href="#compatibility-modes">Compatibility modes</a></p></li>
<li><p><a class="reference external" href="#fetch-option">Fetch option</a></p></li>
<li><p><a class="reference external" href="#formatting-options">Formatting options</a></p></li>
<li><p><a class="reference external" href="#inlining-options">Inlining options</a></p></li>
<li><p><a class="reference external" href="#optimization-levels">Optimization levels</a></p>
<ul>
<li><p><a class="reference external" href="#level-0-optimizations">Level 0 optimizations</a></p></li>
<li><p><a class="reference external" href="#level-1-optimizations">Level 1 optimizations</a></p></li>
<li><p><a class="reference external" href="#level-2-optimizations">Level 2 optimizations</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#minify-method">Minify method</a></p></li>
<li><p><a class="reference external" href="#promise-interface">Promise interface</a></p></li>
<li><p><a class="reference external" href="#cli-utility">CLI utility</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#faq">FAQ</a></p>
<ul>
<li><p><a class="reference external" href="#how-to-optimize-multiple-files">How to optimize multiple files?</a></p></li>
<li><p><a class="reference external" href="#how-to-process-remote-imports-correctly">How to process remote <code class="docutils literal notranslate"><span class="pre">&#64;import</span></code>s correctly?</a></p></li>
<li><p><a class="reference external" href="#how-to-apply-arbitrary-transformations-to-css-properties">How to apply arbitrary transformations to CSS properties?</a></p></li>
<li><p><a class="reference external" href="#how-to-specify-a-custom-rounding-precision">How to specify a custom rounding precision?</a></p></li>
<li><p><a class="reference external" href="#how-to-keep-a-css-fragment-intact">How to keep a CSS fragment intact?</a></p></li>
<li><p><a class="reference external" href="#how-to-preserve-a-comment-block">How to preserve a comment block?</a></p></li>
<li><p><a class="reference external" href="#how-to-rebase-relative-image-urls">How to rebase relative image URLs?</a></p></li>
<li><p><a class="reference external" href="#how-to-work-with-source-maps">How to work with source maps?</a></p></li>
<li><p><a class="reference external" href="#how-to-apply-level-1--2-optimizations-at-the-same-time">How to apply level 1 &amp; 2 optimizations at the same time?</a></p></li>
<li><p><a class="reference external" href="#what-level-2-optimizations-do">What level 2 optimizations do?</a></p></li>
<li><p><a class="reference external" href="#how-to-use-clean-css-with-build-tools">How to use clean-css with build tools?</a></p></li>
<li><p><a class="reference external" href="#how-to-use-clean-css-from-web-browser">How to use clean-css from web browser?</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#contributing">Contributing</a></p>
<ul>
<li><p><a class="reference external" href="#how-to-get-started">How to get started?</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#acknowledgments">Acknowledgments</a></p></li>
<li><p><a class="reference external" href="#license">License</a></p></li>
</ul>
<section class="tex2jax_ignore mathjax_ignore" id="node-js-version-support">
<h1>Node.js version support<a class="headerlink" href="#node-js-version-support" title="Permalink to this headline">#</a></h1>
<p>clean-css requires Node.js 4.0+ (tested on Linux, OS X, and Windows)</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="install">
<h1>Install<a class="headerlink" href="#install" title="Permalink to this headline">#</a></h1>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span> <span class="o">--</span><span class="n">save</span><span class="o">-</span><span class="n">dev</span> <span class="n">clean</span><span class="o">-</span><span class="n">css</span>
</pre></div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="use">
<h1>Use<a class="headerlink" href="#use" title="Permalink to this headline">#</a></h1>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;clean-css&#39;</span><span class="p">);</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;a{font-weight:bold;}&#39;</span><span class="p">;</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* options */</span><span class="w"> </span><span class="p">};</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">(</span><span class="nx">options</span><span class="p">).</span><span class="nx">minify</span><span class="p">(</span><span class="nx">input</span><span class="p">);</span>
</pre></div>
</div>
<section id="important-4-0-breaking-changes">
<h2>Important: 4.0 breaking changes<a class="headerlink" href="#important-4-0-breaking-changes" title="Permalink to this headline">#</a></h2>
<p>clean-css 4.0 introduces some breaking changes:</p>
<ul class="simple">
<li><p>API and CLI interfaces are split, so API stays in this repository while CLI moves to <a class="reference external" href="https://github.com/jakubpawlowicz/clean-css-cli">clean-css-cli</a>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">root</span></code>, <code class="docutils literal notranslate"><span class="pre">relativeTo</span></code>, and <code class="docutils literal notranslate"><span class="pre">target</span></code> options are replaced by a single <code class="docutils literal notranslate"><span class="pre">rebaseTo</span></code> option - this means that rebasing URLs and import inlining is much simpler but may not be (YMMV) as powerful as in 3.x;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">debug</span></code> option is gone as stats are always provided in output object under <code class="docutils literal notranslate"><span class="pre">stats</span></code> property;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">roundingPrecision</span></code> is disabled by default;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">roundingPrecision</span></code> applies to <strong>all</strong> units now, not only <code class="docutils literal notranslate"><span class="pre">px</span></code> as in 3.x;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">processImport</span></code> and <code class="docutils literal notranslate"><span class="pre">processImportFrom</span></code> are merged into <code class="docutils literal notranslate"><span class="pre">inline</span></code> option which defaults to <code class="docutils literal notranslate"><span class="pre">local</span></code>. Remote <code class="docutils literal notranslate"><span class="pre">&#64;import</span></code> rules are <strong>NOT</strong> inlined by default anymore;</p></li>
<li><p>splits <code class="docutils literal notranslate"><span class="pre">inliner:</span> <span class="pre">{</span> <span class="pre">request:</span> <span class="pre">...,</span> <span class="pre">timeout:</span> <span class="pre">...</span> <span class="pre">}</span></code> option into <code class="docutils literal notranslate"><span class="pre">inlineRequest</span></code> and <code class="docutils literal notranslate"><span class="pre">inlineTimeout</span></code> options;</p></li>
<li><p>remote resources without a protocol, e.g. <code class="docutils literal notranslate"><span class="pre">//fonts.googleapis.com/css?family=Domine:700</span></code>, are not inlined anymore;</p></li>
<li><p>changes default Internet Explorer compatibility from 9+ to 10+, to revert the old default use <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">compatibility:</span> <span class="pre">'ie9'</span> <span class="pre">}</span></code> flag;</p></li>
<li><p>renames <code class="docutils literal notranslate"><span class="pre">keepSpecialComments</span></code> to <code class="docutils literal notranslate"><span class="pre">specialComments</span></code>;</p></li>
<li><p>moves <code class="docutils literal notranslate"><span class="pre">roundingPrecision</span></code> and <code class="docutils literal notranslate"><span class="pre">specialComments</span></code> to level 1 optimizations options, see examples;</p></li>
<li><p>moves <code class="docutils literal notranslate"><span class="pre">mediaMerging</span></code>, <code class="docutils literal notranslate"><span class="pre">restructuring</span></code>, <code class="docutils literal notranslate"><span class="pre">semanticMerging</span></code>, and <code class="docutils literal notranslate"><span class="pre">shorthandCompacting</span></code> to level 2 optimizations options, see examples below;</p></li>
<li><p>renames <code class="docutils literal notranslate"><span class="pre">shorthandCompacting</span></code> option to <code class="docutils literal notranslate"><span class="pre">mergeIntoShorthands</span></code>;</p></li>
<li><p>level 1 optimizations are the new default, up to 3.x it was level 2;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">keepBreaks</span></code> option is replaced with <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">format:</span> <span class="pre">'keep-breaks'</span> <span class="pre">}</span></code> to ease transition;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sourceMap</span></code> option has to be a boolean from now on - to specify an input source map pass it a 2nd argument to <code class="docutils literal notranslate"><span class="pre">minify</span></code> method or via a hash instead;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aggressiveMerging</span></code> option is removed as aggressive merging is replaced by smarter override merging.</p></li>
</ul>
</section>
<section id="what-s-new-in-version-4-1">
<h2>What’s new in version 4.1<a class="headerlink" href="#what-s-new-in-version-4-1" title="Permalink to this headline">#</a></h2>
<p>clean-css 4.1 introduces the following changes / features:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">inline:</span> <span class="pre">false</span></code> as an alias to <code class="docutils literal notranslate"><span class="pre">inline:</span> <span class="pre">['none']</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">multiplePseudoMerging</span></code> compatibility flag controlling merging of rules with multiple pseudo classes / elements;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">removeEmpty</span></code> flag in level 1 optimizations controlling removal of rules and nested blocks;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">removeEmpty</span></code> flag in level 2 optimizations controlling removal of rules and nested blocks;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">compatibility:</span> <span class="pre">{</span> <span class="pre">selectors:</span> <span class="pre">{</span> <span class="pre">mergeLimit:</span> <span class="pre">&lt;number&gt;</span> <span class="pre">}</span> <span class="pre">}</span></code> flag in compatibility settings controlling maximum number of selectors in a single rule;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">minify</span></code> method improved signature accepting a list of hashes for a predictable traversal;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">selectorsSortingMethod</span></code> level 1 optimization allows <code class="docutils literal notranslate"><span class="pre">false</span></code> or <code class="docutils literal notranslate"><span class="pre">'none'</span></code> for disabling selector sorting;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fetch</span></code> option controlling a function for handling remote requests;</p></li>
<li><p>new <code class="docutils literal notranslate"><span class="pre">font</span></code> shorthand and <code class="docutils literal notranslate"><span class="pre">font-*</span></code> longhand optimizers;</p></li>
<li><p>removal of <code class="docutils literal notranslate"><span class="pre">optimizeFont</span></code> flag in level 1 optimizations due to new <code class="docutils literal notranslate"><span class="pre">font</span></code> shorthand optimizer;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">skipProperties</span></code> flag in level 2 optimizations controlling which properties won’t be optimized;</p></li>
<li><p>new <code class="docutils literal notranslate"><span class="pre">animation</span></code> shorthand and <code class="docutils literal notranslate"><span class="pre">animation-*</span></code> longhand optimizers;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">removeUnusedAtRules</span></code> level 2 optimization controlling removal of unused <code class="docutils literal notranslate"><span class="pre">&#64;counter-style</span></code>, <code class="docutils literal notranslate"><span class="pre">&#64;font-face</span></code>, <code class="docutils literal notranslate"><span class="pre">&#64;keyframes</span></code>, and <code class="docutils literal notranslate"><span class="pre">&#64;namespace</span></code> at rules;</p></li>
<li><p>the <a class="reference external" href="https://jakubpawlowicz.github.io/clean-css">web interface</a> gets an improved settings panel with “reset to defaults”, instant option changes, and settings being persisted across sessions.</p></li>
</ul>
</section>
<section id="what-s-new-in-version-4-2">
<h2>What’s new in version 4.2<a class="headerlink" href="#what-s-new-in-version-4-2" title="Permalink to this headline">#</a></h2>
<p>clean-css 4.2 introduces the following changes / features:</p>
<ul class="simple">
<li><p>Adds <code class="docutils literal notranslate"><span class="pre">process</span></code> method for compatibility with optimize-css-assets-webpack-plugin;</p></li>
<li><p>new <code class="docutils literal notranslate"><span class="pre">transition</span></code> property optimizer;</p></li>
<li><p>preserves any CSS content between <code class="docutils literal notranslate"><span class="pre">/*</span> <span class="pre">clean-css</span> <span class="pre">ignore:start</span> <span class="pre">*/</span></code> and <code class="docutils literal notranslate"><span class="pre">/*</span> <span class="pre">clean-css</span> <span class="pre">ignore:end</span> <span class="pre">*/</span></code> comments;</p></li>
<li><p>allows filtering based on selector in <code class="docutils literal notranslate"><span class="pre">transform</span></code> callback, see <a class="reference external" href="#how-to-apply-arbitrary-transformations-to-css-properties">example</a>;</p></li>
<li><p>adds configurable line breaks via <code class="docutils literal notranslate"><span class="pre">format:</span> <span class="pre">{</span> <span class="pre">breakWith:</span> <span class="pre">'lf'</span> <span class="pre">}</span></code> option.</p></li>
</ul>
</section>
<section id="constructor-options">
<h2>Constructor options<a class="headerlink" href="#constructor-options" title="Permalink to this headline">#</a></h2>
<p>clean-css constructor accepts a hash as a parameter with the following options available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">compatibility</span></code> - controls compatibility mode used; defaults to <code class="docutils literal notranslate"><span class="pre">ie10+</span></code>; see <a class="reference external" href="#compatibility-modes">compatibility modes</a> for examples;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fetch</span></code> - controls a function for handling remote requests; see <a class="reference external" href="#fetch-option">fetch option</a> for examples (since 4.1.0);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format</span></code> - controls output CSS formatting; defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>; see <a class="reference external" href="#formatting-options">formatting options</a> for examples;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inline</span></code> - controls <code class="docutils literal notranslate"><span class="pre">&#64;import</span></code> inlining rules; defaults to <code class="docutils literal notranslate"><span class="pre">'local'</span></code>; see <a class="reference external" href="#inlining-options">inlining options</a> for examples;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inlineRequest</span></code> - controls extra options for inlining remote <code class="docutils literal notranslate"><span class="pre">&#64;import</span></code> rules, can be any of <a class="reference external" href="https://nodejs.org/api/http.html#http_http_request_options_callback">HTTP(S) request options</a>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inlineTimeout</span></code> - controls number of milliseconds after which inlining a remote <code class="docutils literal notranslate"><span class="pre">&#64;import</span></code> fails; defaults to 5000;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">level</span></code> - controls optimization level used; defaults to <code class="docutils literal notranslate"><span class="pre">1</span></code>; see <a class="reference external" href="#optimization-levels">optimization levels</a> for examples;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rebase</span></code> - controls URL rebasing; defaults to <code class="docutils literal notranslate"><span class="pre">true</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rebaseTo</span></code> - controls a directory to which all URLs are rebased, most likely the directory under which the output file will live; defaults to the current directory;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">returnPromise</span></code> - controls whether <code class="docutils literal notranslate"><span class="pre">minify</span></code> method returns a Promise object or not; defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>; see <a class="reference external" href="#promise-interface">promise interface</a> for examples;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sourceMap</span></code> - controls whether an output source map is built; defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sourceMapInlineSources</span></code> - controls embedding sources inside a source map’s <code class="docutils literal notranslate"><span class="pre">sourcesContent</span></code> field; defaults to false.</p></li>
</ul>
</section>
<section id="compatibility-modes">
<h2>Compatibility modes<a class="headerlink" href="#compatibility-modes" title="Permalink to this headline">#</a></h2>
<p>There is a certain number of compatibility mode shortcuts, namely:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">CleanCSS({</span> <span class="pre">compatibility:</span> <span class="pre">'*'</span> <span class="pre">})</span></code> (default) - Internet Explorer 10+ compatibility mode</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">CleanCSS({</span> <span class="pre">compatibility:</span> <span class="pre">'ie9'</span> <span class="pre">})</span></code> - Internet Explorer 9+ compatibility mode</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">CleanCSS({</span> <span class="pre">compatibility:</span> <span class="pre">'ie8'</span> <span class="pre">})</span></code> - Internet Explorer 8+ compatibility mode</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">CleanCSS({</span> <span class="pre">compatibility:</span> <span class="pre">'ie7'</span> <span class="pre">})</span></code> - Internet Explorer 7+ compatibility mode</p></li>
</ul>
<p>Each of these modes is an alias to a <a class="reference external" href="https://github.com/jakubpawlowicz/clean-css/blob/master/lib/options/compatibility.js">fine grained configuration</a>, with the following options available:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">compatibility</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">colors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">opacity</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">// controls `rgba()` / `hsla()` color support</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">properties</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">backgroundClipMerging</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls background-clip merging into shorthand</span>
<span class="w">      </span><span class="nx">backgroundOriginMerging</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls background-origin merging into shorthand</span>
<span class="w">      </span><span class="nx">backgroundSizeMerging</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls background-size merging into shorthand</span>
<span class="w">      </span><span class="nx">colors</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls color optimizations</span>
<span class="w">      </span><span class="nx">ieBangHack</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls keeping IE bang hack</span>
<span class="w">      </span><span class="nx">ieFilters</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls keeping IE `filter` / `-ms-filter`</span>
<span class="w">      </span><span class="nx">iePrefixHack</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls keeping IE prefix hack</span>
<span class="w">      </span><span class="nx">ieSuffixHack</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls keeping IE suffix hack</span>
<span class="w">      </span><span class="nx">merging</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls property merging based on understandability</span>
<span class="w">      </span><span class="nx">shorterLengthUnits</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls shortening pixel units into `pc`, `pt`, or `in` units</span>
<span class="w">      </span><span class="nx">spaceAfterClosingBrace</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls keeping space after closing brace - `url() no-repeat` into `url()no-repeat`</span>
<span class="w">      </span><span class="nx">urlQuotes</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls keeping quoting inside `url()`</span>
<span class="w">      </span><span class="nx">zeroUnits</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">// controls removal of units `0` value</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">selectors</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">adjacentSpace</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls extra space before `nav` element</span>
<span class="w">      </span><span class="nx">ie7Hack</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls removal of IE7 selector hacks, e.g. `*+html...`</span>
<span class="w">      </span><span class="nx">mergeablePseudoClasses</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;:active&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">...],</span><span class="w"> </span><span class="c1">// controls a whitelist of mergeable pseudo classes</span>
<span class="w">      </span><span class="nx">mergeablePseudoElements</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;::after&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">...],</span><span class="w"> </span><span class="c1">// controls a whitelist of mergeable pseudo elements</span>
<span class="w">      </span><span class="nx">mergeLimit</span><span class="o">:</span><span class="w"> </span><span class="mf">8191</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls maximum number of selectors in a single rule (since 4.1.0)</span>
<span class="w">      </span><span class="nx">multiplePseudoMerging</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">// controls merging of rules with multiple pseudo classes / elements (since 4.1.0)</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">units</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">ch</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls treating `ch` as a supported unit</span>
<span class="w">      </span><span class="ow">in</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls treating `in` as a supported unit</span>
<span class="w">      </span><span class="nx">pc</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls treating `pc` as a supported unit</span>
<span class="w">      </span><span class="nx">pt</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls treating `pt` as a supported unit</span>
<span class="w">      </span><span class="nx">rem</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls treating `rem` as a supported unit</span>
<span class="w">      </span><span class="nx">vh</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls treating `vh` as a supported unit</span>
<span class="w">      </span><span class="nx">vm</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls treating `vm` as a supported unit</span>
<span class="w">      </span><span class="nx">vmax</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls treating `vmax` as a supported unit</span>
<span class="w">      </span><span class="nx">vmin</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">// controls treating `vmin` as a supported unit</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
<p>You can also use a string when setting a compatibility mode, e.g.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">compatibility</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;ie9,-properties.merging&#39;</span><span class="w"> </span><span class="c1">// sets compatibility to IE9 mode with disabled property merging</span>
<span class="p">})</span>
</pre></div>
</div>
</section>
<section id="fetch-option">
<h2>Fetch option<a class="headerlink" href="#fetch-option" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">fetch</span></code> option accepts a function which handles remote resource fetching, e.g.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;request&#39;</span><span class="p">);</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;@import url(http://example.com/path/to/stylesheet.css);&#39;</span><span class="p">;</span>
<span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">fetch</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">uri</span><span class="p">,</span><span class="w"> </span><span class="nx">inlineRequest</span><span class="p">,</span><span class="w"> </span><span class="nx">inlineTimeout</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">request</span><span class="p">(</span><span class="nx">uri</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="w"> </span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">body</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">callback</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">response</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mf">200</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">callback</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="nx">body</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}).</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">);</span>
</pre></div>
</div>
<p>This option provides a convenient way of overriding the default fetching logic if it doesn’t support a particular feature, say CONNECT proxies.</p>
<p>Unless given, the default <a class="reference external" href="https://github.com/jakubpawlowicz/clean-css/blob/master/lib/reader/load-remote-resource.js">loadRemoteResource</a> logic is used.</p>
</section>
<section id="formatting-options">
<h2>Formatting options<a class="headerlink" href="#formatting-options" title="Permalink to this headline">#</a></h2>
<p>By default output CSS is formatted without any whitespace unless a <code class="docutils literal notranslate"><span class="pre">format</span></code> option is given.
First of all there are two shorthands:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;beautify&#39;</span><span class="w"> </span><span class="c1">// formats output in a really nice way</span>
<span class="p">})</span>
</pre></div>
</div>
<p>and</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;keep-breaks&#39;</span><span class="w"> </span><span class="c1">// formats output the default way but adds line breaks for improved readability</span>
<span class="p">})</span>
</pre></div>
</div>
<p>however <code class="docutils literal notranslate"><span class="pre">format</span></code> option also accept a fine-grained set of options:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">breaks</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// controls where to insert breaks</span>
<span class="w">      </span><span class="nx">afterAtRule</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls if a line break comes after an at-rule; e.g. `@charset`; defaults to `false`</span>
<span class="w">      </span><span class="nx">afterBlockBegins</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls if a line break comes after a block begins; e.g. `@media`; defaults to `false`</span>
<span class="w">      </span><span class="nx">afterBlockEnds</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls if a line break comes after a block ends, defaults to `false`</span>
<span class="w">      </span><span class="nx">afterComment</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls if a line break comes after a comment; defaults to `false`</span>
<span class="w">      </span><span class="nx">afterProperty</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls if a line break comes after a property; defaults to `false`</span>
<span class="w">      </span><span class="nx">afterRuleBegins</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls if a line break comes after a rule begins; defaults to `false`</span>
<span class="w">      </span><span class="nx">afterRuleEnds</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls if a line break comes after a rule ends; defaults to `false`</span>
<span class="w">      </span><span class="nx">beforeBlockEnds</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls if a line break comes before a block ends; defaults to `false`</span>
<span class="w">      </span><span class="nx">betweenSelectors</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c1">// controls if a line break comes between selectors; defaults to `false`</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">breakWith</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;\n&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls the new line character, can be `&#39;\r\n&#39;` or `&#39;\n&#39;` (aliased as `&#39;windows&#39;` and `&#39;unix&#39;` or `&#39;crlf&#39;` and `&#39;lf&#39;`); defaults to system one, so former on Windows and latter on Unix</span>
<span class="w">    </span><span class="nx">indentBy</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls number of characters to indent with; defaults to `0`</span>
<span class="w">    </span><span class="nx">indentWith</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;space&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls a character to indent with, can be `&#39;space&#39;` or `&#39;tab&#39;`; defaults to `&#39;space&#39;`</span>
<span class="w">    </span><span class="nx">spaces</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// controls where to insert spaces</span>
<span class="w">      </span><span class="nx">aroundSelectorRelation</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls if spaces come around selector relations; e.g. `div &gt; a`; defaults to `false`</span>
<span class="w">      </span><span class="nx">beforeBlockBegins</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls if a space comes before a block begins; e.g. `.block {`; defaults to `false`</span>
<span class="w">      </span><span class="nx">beforeValue</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c1">// controls if a space comes before a value; e.g. `width: 1rem`; defaults to `false`</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">wrapAt</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c1">// controls maximum line length; defaults to `false`</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
</section>
<section id="inlining-options">
<h2>Inlining options<a class="headerlink" href="#inlining-options" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">inline</span></code> option whitelists which <code class="docutils literal notranslate"><span class="pre">&#64;import</span></code> rules will be processed, e.g.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">inline</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;local&#39;</span><span class="p">]</span><span class="w"> </span><span class="c1">// default; enables local inlining only</span>
<span class="p">})</span>
</pre></div>
</div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">inline</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;none&#39;</span><span class="p">]</span><span class="w"> </span><span class="c1">// disables all inlining</span>
<span class="p">})</span>
</pre></div>
</div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// introduced in clean-css 4.1.0</span>

<span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">inline</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="c1">// disables all inlining (alias to `[&#39;none&#39;]`)</span>
<span class="p">})</span>
</pre></div>
</div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">inline</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;all&#39;</span><span class="p">]</span><span class="w"> </span><span class="c1">// enables all inlining, same as [&#39;local&#39;, &#39;remote&#39;]</span>
<span class="p">})</span>
</pre></div>
</div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">inline</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;local&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;mydomain.example.com&#39;</span><span class="p">]</span><span class="w"> </span><span class="c1">// enables local inlining plus given remote source</span>
<span class="p">})</span>
</pre></div>
</div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">inline</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;local&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;remote&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;!fonts.googleapis.com&#39;</span><span class="p">]</span><span class="w"> </span><span class="c1">// enables all inlining but from given remote source</span>
<span class="p">})</span>
</pre></div>
</div>
</section>
<section id="optimization-levels">
<h2>Optimization levels<a class="headerlink" href="#optimization-levels" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">level</span></code> option can be either <code class="docutils literal notranslate"><span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">1</span></code> (default), or <code class="docutils literal notranslate"><span class="pre">2</span></code>, e.g.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">level</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span>
<span class="p">})</span>
</pre></div>
</div>
<p>or a fine-grained configuration given via a hash.</p>
<p>Please note that level 1 optimization options are generally safe while level 2 optimizations should be safe for most users.</p>
<section id="level-0-optimizations">
<h3>Level 0 optimizations<a class="headerlink" href="#level-0-optimizations" title="Permalink to this headline">#</a></h3>
<p>Level 0 optimizations simply means “no optimizations”. Use it when you’d like to inline imports and / or rebase URLs but skip everything else.</p>
</section>
<section id="level-1-optimizations">
<h3>Level 1 optimizations<a class="headerlink" href="#level-1-optimizations" title="Permalink to this headline">#</a></h3>
<p>Level 1 optimizations (default) operate on single properties only, e.g. can remove units when not required, turn rgb colors to a shorter hex representation, remove comments, etc</p>
<p>Here is a full list of available options:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">level</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="mf">1</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">cleanupCharsets</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls `@charset` moving to the front of a stylesheet; defaults to `true`</span>
<span class="w">      </span><span class="nx">normalizeUrls</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls URL normalization; defaults to `true`</span>
<span class="w">      </span><span class="nx">optimizeBackground</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls `background` property optimizations; defaults to `true`</span>
<span class="w">      </span><span class="nx">optimizeBorderRadius</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls `border-radius` property optimizations; defaults to `true`</span>
<span class="w">      </span><span class="nx">optimizeFilter</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls `filter` property optimizations; defaults to `true`</span>
<span class="w">      </span><span class="nx">optimizeFont</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls `font` property optimizations; defaults to `true`</span>
<span class="w">      </span><span class="nx">optimizeFontWeight</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls `font-weight` property optimizations; defaults to `true`</span>
<span class="w">      </span><span class="nx">optimizeOutline</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls `outline` property optimizations; defaults to `true`</span>
<span class="w">      </span><span class="nx">removeEmpty</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls removing empty rules and nested blocks; defaults to `true`</span>
<span class="w">      </span><span class="nx">removeNegativePaddings</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls removing negative paddings; defaults to `true`</span>
<span class="w">      </span><span class="nx">removeQuotes</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls removing quotes when unnecessary; defaults to `true`</span>
<span class="w">      </span><span class="nx">removeWhitespace</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls removing unused whitespace; defaults to `true`</span>
<span class="w">      </span><span class="nx">replaceMultipleZeros</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// contols removing redundant zeros; defaults to `true`</span>
<span class="w">      </span><span class="nx">replaceTimeUnits</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls replacing time units with shorter values; defaults to `true`</span>
<span class="w">      </span><span class="nx">replaceZeroUnits</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls replacing zero values with units; defaults to `true`</span>
<span class="w">      </span><span class="nx">roundingPrecision</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// rounds pixel values to `N` decimal places; `false` disables rounding; defaults to `false`</span>
<span class="w">      </span><span class="nx">selectorsSortingMethod</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;standard&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// denotes selector sorting method; can be `&#39;natural&#39;` or `&#39;standard&#39;`, `&#39;none&#39;`, or false (the last two since 4.1.0); defaults to `&#39;standard&#39;`</span>
<span class="w">      </span><span class="nx">specialComments</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;all&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// denotes a number of /*! ... */ comments preserved; defaults to `all`</span>
<span class="w">      </span><span class="nx">tidyAtRules</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls at-rules (e.g. `@charset`, `@import`) optimizing; defaults to `true`</span>
<span class="w">      </span><span class="nx">tidyBlockScopes</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls block scopes (e.g. `@media`) optimizing; defaults to `true`</span>
<span class="w">      </span><span class="nx">tidySelectors</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls selectors optimizing; defaults to `true`,</span>
<span class="w">      </span><span class="nx">semicolonAfterLastProperty</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls removing trailing semicolons in rule; defaults to `false` - means remove</span>
<span class="w">      </span><span class="nx">transform</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="c1">// defines a callback for fine-grained property optimization; defaults to no-op</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>There is an <code class="docutils literal notranslate"><span class="pre">all</span></code> shortcut for toggling all options at the same time, e.g.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">level</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="mf">1</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">all</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// set all values to `false`</span>
<span class="w">      </span><span class="nx">tidySelectors</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">// turns on optimizing selectors</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
<section id="level-2-optimizations">
<h3>Level 2 optimizations<a class="headerlink" href="#level-2-optimizations" title="Permalink to this headline">#</a></h3>
<p>Level 2 optimizations operate at rules or multiple properties level, e.g. can remove duplicate rules, remove properties redefined further down a stylesheet, or restructure rules by moving them around.</p>
<p>Please note that if level 2 optimizations are turned on then, unless explicitely disabled, level 1 optimizations are applied as well.</p>
<p>Here is a full list of available options:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">level</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="mf">2</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">mergeAdjacentRules</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls adjacent rules merging; defaults to true</span>
<span class="w">      </span><span class="nx">mergeIntoShorthands</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls merging properties into shorthands; defaults to true</span>
<span class="w">      </span><span class="nx">mergeMedia</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls `@media` merging; defaults to true</span>
<span class="w">      </span><span class="nx">mergeNonAdjacentRules</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls non-adjacent rule merging; defaults to true</span>
<span class="w">      </span><span class="nx">mergeSemantically</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls semantic merging; defaults to false</span>
<span class="w">      </span><span class="nx">overrideProperties</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls property overriding based on understandability; defaults to true</span>
<span class="w">      </span><span class="nx">removeEmpty</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls removing empty rules and nested blocks; defaults to `true`</span>
<span class="w">      </span><span class="nx">reduceNonAdjacentRules</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls non-adjacent rule reducing; defaults to true</span>
<span class="w">      </span><span class="nx">removeDuplicateFontRules</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls duplicate `@font-face` removing; defaults to true</span>
<span class="w">      </span><span class="nx">removeDuplicateMediaBlocks</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls duplicate `@media` removing; defaults to true</span>
<span class="w">      </span><span class="nx">removeDuplicateRules</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls duplicate rules removing; defaults to true</span>
<span class="w">      </span><span class="nx">removeUnusedAtRules</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls unused at rule removing; defaults to false (available since 4.1.0)</span>
<span class="w">      </span><span class="nx">restructureRules</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// controls rule restructuring; defaults to false</span>
<span class="w">      </span><span class="nx">skipProperties</span><span class="o">:</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="c1">// controls which properties won&#39;t be optimized, defaults to `[]` which means all will be optimized (since 4.1.0)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>There is an <code class="docutils literal notranslate"><span class="pre">all</span></code> shortcut for toggling all options at the same time, e.g.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">level</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="mf">2</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">all</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// sets all values to `false`</span>
<span class="w">      </span><span class="nx">removeDuplicateRules</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="c1">// turns on removing duplicate rules</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
</section>
<section id="minify-method">
<h2>Minify method<a class="headerlink" href="#minify-method" title="Permalink to this headline">#</a></h2>
<p>Once configured clean-css provides a <code class="docutils literal notranslate"><span class="pre">minify</span></code> method to optimize a given CSS, e.g.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">(</span><span class="nx">options</span><span class="p">).</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">);</span>
</pre></div>
</div>
<p>The output of the <code class="docutils literal notranslate"><span class="pre">minify</span></code> method is a hash with following fields:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">styles</span><span class="p">);</span><span class="w"> </span><span class="c1">// optimized output CSS as a string</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">sourceMap</span><span class="p">);</span><span class="w"> </span><span class="c1">// output source map if requested with `sourceMap` option</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">errors</span><span class="p">);</span><span class="w"> </span><span class="c1">// a list of errors raised</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">warnings</span><span class="p">);</span><span class="w"> </span><span class="c1">// a list of warnings raised</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">originalSize</span><span class="p">);</span><span class="w"> </span><span class="c1">// original content size after import inlining</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">minifiedSize</span><span class="p">);</span><span class="w"> </span><span class="c1">// optimized content size</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">timeSpent</span><span class="p">);</span><span class="w"> </span><span class="c1">// time spent on optimizations in milliseconds</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">efficiency</span><span class="p">);</span><span class="w"> </span><span class="c1">// `(originalSize - minifiedSize) / originalSize`, e.g. 0.25 if size is reduced from 100 bytes to 75 bytes</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">minify</span></code> method also accepts an input source map, e.g.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">(</span><span class="nx">options</span><span class="p">).</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span><span class="w"> </span><span class="nx">inputSourceMap</span><span class="p">);</span>
</pre></div>
</div>
<p>or a callback invoked when optimizations are finished, e.g.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">(</span><span class="nx">options</span><span class="p">).</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="w"> </span><span class="nx">output</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// `output` is the same as in the synchronous call above</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
<section id="promise-interface">
<h2>Promise interface<a class="headerlink" href="#promise-interface" title="Permalink to this headline">#</a></h2>
<p>If you prefer clean-css to return a Promise object then you need to explicitely ask for it, e.g.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span><span class="w"> </span><span class="nx">returnPromise</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">})</span>
<span class="w">  </span><span class="p">.</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">output</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">output</span><span class="p">.</span><span class="nx">styles</span><span class="p">);</span><span class="w"> </span><span class="p">})</span>
<span class="w">  </span><span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// deal with errors });</span>
</pre></div>
</div>
</section>
<section id="cli-utility">
<h2>CLI utility<a class="headerlink" href="#cli-utility" title="Permalink to this headline">#</a></h2>
<p>Clean-css has an associated command line utility that can be installed separately using <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">install</span> <span class="pre">clean-css-cli</span></code>. For more detailed information, please visit https://github.com/jakubpawlowicz/clean-css-cli.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="faq">
<h1>FAQ<a class="headerlink" href="#faq" title="Permalink to this headline">#</a></h1>
<section id="how-to-optimize-multiple-files">
<h2>How to optimize multiple files?<a class="headerlink" href="#how-to-optimize-multiple-files" title="Permalink to this headline">#</a></h2>
<p>It can be done either by passing an array of paths, or, when sources are already available, a hash or an array of hashes:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">().</span><span class="nx">minify</span><span class="p">([</span><span class="s1">&#39;path/to/file/one&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;path/to/file/two&#39;</span><span class="p">]);</span>
</pre></div>
</div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">().</span><span class="nx">minify</span><span class="p">({</span>
<span class="w">  </span><span class="s1">&#39;path/to/file/one&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">styles</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;contents of file one&#39;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="s1">&#39;path/to/file/two&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">styles</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;contents of file two&#39;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">().</span><span class="nx">minify</span><span class="p">([</span>
<span class="w">  </span><span class="p">{</span><span class="s1">&#39;path/to/file/one&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">styles</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;contents of file one&#39;</span><span class="p">}},</span>
<span class="w">  </span><span class="p">{</span><span class="s1">&#39;path/to/file/two&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">styles</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;contents of file two&#39;</span><span class="p">}}</span>
<span class="p">]);</span>
</pre></div>
</div>
<p>Passing an array of hashes allows you to explicitly specify the order in which the input files are concatenated. Whereas when you use a single hash the order is determined by the <a class="reference external" href="http://2ality.com/2015/10/property-traversal-order-es6.html">traversal order of object properties</a> - available since 4.1.0.</p>
<p>Important note - any <code class="docutils literal notranslate"><span class="pre">&#64;import</span></code> rules already present in the hash will be resolved in memory.</p>
</section>
<section id="how-to-process-remote-imports-correctly">
<h2>How to process remote <code class="docutils literal notranslate"><span class="pre">&#64;import</span></code>s correctly?<a class="headerlink" href="#how-to-process-remote-imports-correctly" title="Permalink to this headline">#</a></h2>
<p>In order to inline remote <code class="docutils literal notranslate"><span class="pre">&#64;import</span></code> statements you need to provide a callback to minify method as fetching remote assets is an asynchronous operation, e.g.:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;@import url(http://example.com/path/to/remote/styles);&#39;</span><span class="p">;</span>
<span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span><span class="w"> </span><span class="nx">inline</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;remote&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">}).</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="w"> </span><span class="nx">output</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// output.styles</span>
<span class="p">});</span>
</pre></div>
</div>
<p>If you don’t provide a callback, then remote <code class="docutils literal notranslate"><span class="pre">&#64;import</span></code>s will be left as is.</p>
</section>
<section id="how-to-apply-arbitrary-transformations-to-css-properties">
<h2>How to apply arbitrary transformations to CSS properties?<a class="headerlink" href="#how-to-apply-arbitrary-transformations-to-css-properties" title="Permalink to this headline">#</a></h2>
<p>If clean-css doesn’t perform a particular property optimization, you can use <code class="docutils literal notranslate"><span class="pre">transform</span></code> callback to apply it:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span>var source = &#39;.block{background-image:url(/path/to/image.png)}&#39;;
var output = new CleanCSS({
  level: {
    1: {
      transform: function (propertyName, propertyValue, selector /* `selector` available since 4.2.0-pre */) {
        if (propertyName == &#39;background-image&#39; &amp;&amp; propertyValue.indexOf(&#39;/path/to&#39;) &gt; -1) {
          return propertyValue.replace(&#39;/path/to&#39;, &#39;../valid/path/to&#39;);
        }
      }
    }
  }
}).minify(source);

console.log(output.styles); # =&gt; .block{background-image:url(../valid/path/to/image.png)}
</pre></div>
</div>
<p>Note: returning <code class="docutils literal notranslate"><span class="pre">false</span></code> from <code class="docutils literal notranslate"><span class="pre">transform</span></code> callback will drop a property.</p>
</section>
<section id="how-to-specify-a-custom-rounding-precision">
<h2>How to specify a custom rounding precision?<a class="headerlink" href="#how-to-specify-a-custom-rounding-precision" title="Permalink to this headline">#</a></h2>
<p>The level 1 <code class="docutils literal notranslate"><span class="pre">roundingPrecision</span></code> optimization option accept a string with per-unit rounding precision settings, e.g.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">level</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="mf">1</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">roundingPrecision</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;all=3,px=5&#39;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}).</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">)</span>
</pre></div>
</div>
<p>which sets all units rounding precision to 3 digits except <code class="docutils literal notranslate"><span class="pre">px</span></code> unit precision of 5 digits.</p>
</section>
<section id="how-to-keep-a-css-fragment-intact">
<h2>How to keep a CSS fragment intact?<a class="headerlink" href="#how-to-keep-a-css-fragment-intact" title="Permalink to this headline">#</a></h2>
<p>Note: available in the current master, to be released in 4.2.0.</p>
<p>Wrap the CSS fragment in special comments which instruct clean-css to preserve it, e.g.</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">block-1</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">red</span>
<span class="p">}</span>
<span class="c">/* clean-css ignore:start */</span>
<span class="p">.</span><span class="nc">block-special</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">transparent</span>
<span class="p">}</span>
<span class="c">/* clean-css ignore:end */</span>
<span class="p">.</span><span class="nc">block-2</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Optimizing this CSS will result in the following output:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">block-1</span><span class="p">{</span><span class="k">color</span><span class="p">:</span><span class="kc">red</span><span class="p">}</span>
<span class="p">.</span><span class="nc">block-special</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="kc">transparent</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">block-2</span><span class="p">{</span><span class="k">margin</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="how-to-preserve-a-comment-block">
<h2>How to preserve a comment block?<a class="headerlink" href="#how-to-preserve-a-comment-block" title="Permalink to this headline">#</a></h2>
<p>Use the <code class="docutils literal notranslate"><span class="pre">/*!</span></code> notation instead of the standard one <code class="docutils literal notranslate"><span class="pre">/*</span></code>:</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="c">/*!</span>
<span class="c">  Important comments included in optimized output.</span>
<span class="c">*/</span>
</pre></div>
</div>
</section>
<section id="how-to-rebase-relative-image-urls">
<h2>How to rebase relative image URLs?<a class="headerlink" href="#how-to-rebase-relative-image-urls" title="Permalink to this headline">#</a></h2>
<p>clean-css will handle it automatically for you in the following cases:</p>
<ul class="simple">
<li><p>when full paths to input files are passed in as options;</p></li>
<li><p>when correct paths are passed in via a hash;</p></li>
<li><p>when <code class="docutils literal notranslate"><span class="pre">rebaseTo</span></code> is used with any of above two.</p></li>
</ul>
</section>
<section id="how-to-work-with-source-maps">
<h2>How to work with source maps?<a class="headerlink" href="#how-to-work-with-source-maps" title="Permalink to this headline">#</a></h2>
<p>To generate a source map, use <code class="docutils literal notranslate"><span class="pre">sourceMap:</span> <span class="pre">true</span></code> option, e.g.:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span><span class="w"> </span><span class="nx">sourceMap</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nx">rebaseTo</span><span class="o">:</span><span class="w"> </span><span class="nx">pathToOutputDirectory</span><span class="w"> </span><span class="p">})</span>
<span class="w">  </span><span class="p">.</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="w"> </span><span class="nx">output</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// access output.sourceMap for SourceMapGenerator object</span>
<span class="w">    </span><span class="c1">// see https://github.com/mozilla/source-map/#sourcemapgenerator for more details</span>
<span class="p">});</span>
</pre></div>
</div>
<p>You can also pass an input source map directly as a 2nd argument to <code class="docutils literal notranslate"><span class="pre">minify</span></code> method:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span><span class="w"> </span><span class="nx">sourceMap</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nx">rebaseTo</span><span class="o">:</span><span class="w"> </span><span class="nx">pathToOutputDirectory</span><span class="w"> </span><span class="p">})</span>
<span class="w">  </span><span class="p">.</span><span class="nx">minify</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span><span class="w"> </span><span class="nx">inputSourceMap</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="w"> </span><span class="nx">output</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// access output.sourceMap to access SourceMapGenerator object</span>
<span class="w">    </span><span class="c1">// see https://github.com/mozilla/source-map/#sourcemapgenerator for more details</span>
<span class="p">});</span>
</pre></div>
</div>
<p>or even multiple input source maps at once:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span><span class="w"> </span><span class="nx">sourceMap</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nx">rebaseTo</span><span class="o">:</span><span class="w"> </span><span class="nx">pathToOutputDirectory</span><span class="w"> </span><span class="p">}).</span><span class="nx">minify</span><span class="p">({</span>
<span class="w">  </span><span class="s1">&#39;path/to/source/1&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">styles</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;...styles...&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">sourceMap</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;...source-map...&#39;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="s1">&#39;path/to/source/2&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">styles</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;...styles...&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">sourceMap</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;...source-map...&#39;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">},</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="w"> </span><span class="nx">output</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// access output.sourceMap as above</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
<section id="how-to-apply-level-1-2-optimizations-at-the-same-time">
<h2>How to apply level 1 &amp; 2 optimizations at the same time?<a class="headerlink" href="#how-to-apply-level-1-2-optimizations-at-the-same-time" title="Permalink to this headline">#</a></h2>
<p>Using the hash configuration specifying both optimization levels, e.g.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nx">CleanCSS</span><span class="p">({</span>
<span class="w">  </span><span class="nx">level</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="mf">1</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">all</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">      </span><span class="nx">normalizeUrls</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="mf">2</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">restructureRules</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
<p>will apply level 1 optimizations, except url normalization, and default level 2 optimizations with rule restructuring.</p>
</section>
<section id="what-level-2-optimizations-do">
<h2>What level 2 optimizations do?<a class="headerlink" href="#what-level-2-optimizations-do" title="Permalink to this headline">#</a></h2>
<p>All level 2 optimizations are dispatched <a class="reference external" href="https://github.com/jakubpawlowicz/clean-css/blob/master/lib/optimizer/level-2/optimize.js#L67">here</a>, and this is what they do:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">recursivelyOptimizeBlocks</span></code> - does all the following operations on a nested block, like <code class="docutils literal notranslate"><span class="pre">&#64;media</span></code> or <code class="docutils literal notranslate"><span class="pre">&#64;keyframe</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">recursivelyOptimizeProperties</span></code> - optimizes properties in rulesets and flat at-rules, like &#64;font-face, by splitting them into components (e.g. <code class="docutils literal notranslate"><span class="pre">margin</span></code> into <code class="docutils literal notranslate"><span class="pre">margin-(bottom|left|right|top)</span></code>), optimizing, and restoring them back. You may want to use <code class="docutils literal notranslate"><span class="pre">mergeIntoShorthands</span></code> option to control whether you want to turn multiple components into shorthands;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">removeDuplicates</span></code> - gets rid of duplicate rulesets with exactly the same set of properties, e.g. when including a Sass / Less partial twice for no good reason;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mergeAdjacent</span></code> - merges adjacent rulesets with the same selector or rules;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reduceNonAdjacent</span></code> - identifies which properties are overridden in same-selector non-adjacent rulesets, and removes them;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mergeNonAdjacentBySelector</span></code> - identifies same-selector non-adjacent rulesets which can be moved (!) to be merged, requires all intermediate rulesets to not redefine the moved properties, or if redefined to have the same value;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mergeNonAdjacentByBody</span></code> - same as the one above but for same-selector non-adjacent rulesets;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">restructure</span></code> - tries to reorganize different-selector different-rules rulesets so they take less space, e.g. <code class="docutils literal notranslate"><span class="pre">.one{padding:0}.two{margin:0}.one{margin-bottom:3px}</span></code> into <code class="docutils literal notranslate"><span class="pre">.two{margin:0}.one{padding:0;margin-bottom:3px}</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">removeDuplicateFontAtRules</span></code> - removes duplicated <code class="docutils literal notranslate"><span class="pre">&#64;font-face</span></code> rules;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">removeDuplicateMediaQueries</span></code> - removes duplicated <code class="docutils literal notranslate"><span class="pre">&#64;media</span></code> nested blocks;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mergeMediaQueries</span></code> - merges non-adjacent <code class="docutils literal notranslate"><span class="pre">&#64;media</span></code> at-rules by the same rules as <code class="docutils literal notranslate"><span class="pre">mergeNonAdjacentBy*</span></code> above;</p></li>
</ul>
</section>
<section id="how-to-use-clean-css-with-build-tools">
<h2>How to use clean-css with build tools?<a class="headerlink" href="#how-to-use-clean-css-with-build-tools" title="Permalink to this headline">#</a></h2>
<p>There is a number of 3rd party plugins to popular build tools:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/broccolijs/broccoli#broccoli">Broccoli</a>: <a class="reference external" href="https://github.com/shinnn/broccoli-clean-css">broccoli-clean-css</a></p></li>
<li><p><a class="reference external" href="http://brunch.io/">Brunch</a>: <a class="reference external" href="https://github.com/brunch/clean-css-brunch">clean-css-brunch</a></p></li>
<li><p><a class="reference external" href="http://gruntjs.com">Grunt</a>: <a class="reference external" href="https://github.com/gruntjs/grunt-contrib-cssmin">grunt-contrib-cssmin</a></p></li>
<li><p><a class="reference external" href="http://gulpjs.com/">Gulp</a>: <a class="reference external" href="https://github.com/scniro/gulp-clean-css">gulp-clean-css</a></p></li>
<li><p><a class="reference external" href="http://gulpjs.com/">Gulp</a>: <a class="reference external" href="https://github.com/jakubpawlowicz/clean-css/issues/342">using vinyl-map as a wrapper - courtesy of &#64;sogko</a></p></li>
<li><p><a class="reference external" href="https://github.com/component/builder2.js">component-builder2</a>: <a class="reference external" href="https://github.com/poying/builder-clean-css">builder-clean-css</a></p></li>
<li><p><a class="reference external" href="http://metalsmith.io">Metalsmith</a>: <a class="reference external" href="https://github.com/aymericbeaumet/metalsmith-clean-css">metalsmith-clean-css</a></p></li>
<li><p><a class="reference external" href="https://github.com/lasso-js/lasso">Lasso</a>: <a class="reference external" href="https://github.com/yomed/lasso-clean-css">lasso-clean-css</a></p></li>
<li><p><a class="reference external" href="https://github.com/start-runner/start">Start</a>: <a class="reference external" href="https://github.com/start-runner/clean-css">start-clean-css</a></p></li>
</ul>
</section>
<section id="how-to-use-clean-css-from-web-browser">
<h2>How to use clean-css from web browser?<a class="headerlink" href="#how-to-use-clean-css-from-web-browser" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>https://jakubpawlowicz.github.io/clean-css/ (official web interface)</p></li>
<li><p>http://refresh-sf.com/</p></li>
<li><p>http://adamburgess.github.io/clean-css-online/</p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="contributing">
<h1>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">#</a></h1>
<p>See <a class="reference external" href="https://github.com/jakubpawlowicz/clean-css/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a>.</p>
<section id="how-to-get-started">
<h2>How to get started?<a class="headerlink" href="#how-to-get-started" title="Permalink to this headline">#</a></h2>
<p>First clone the sources:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:jakubpawlowicz/clean-css.git
</pre></div>
</div>
<p>then install dependencies:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>clean-css
npm<span class="w"> </span>install
</pre></div>
</div>
<p>then use any of the following commands to verify your copy:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>npm<span class="w"> </span>run<span class="w"> </span>bench<span class="w"> </span><span class="c1"># for clean-css benchmarks (see [test/bench.js](https://github.com/jakubpawlowicz/clean-css/blob/master/test/bench.js) for details)</span>
npm<span class="w"> </span>run<span class="w"> </span>browserify<span class="w"> </span><span class="c1"># to create the browser-ready clean-css version</span>
npm<span class="w"> </span>run<span class="w"> </span>check<span class="w"> </span><span class="c1"># to lint JS sources with [JSHint](https://github.com/jshint/jshint/)</span>
npm<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="c1"># to run all tests</span>
</pre></div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="acknowledgments">
<h1>Acknowledgments<a class="headerlink" href="#acknowledgments" title="Permalink to this headline">#</a></h1>
<p>Sorted alphabetically by GitHub handle:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/abarre">&#64;abarre</a> (Anthony Barre) for improvements to <code class="docutils literal notranslate"><span class="pre">&#64;import</span></code> processing;</p></li>
<li><p><a class="reference external" href="https://github.com/alexlamsl">&#64;alexlamsl</a> (Alex Lam S.L.) for testing early clean-css 4 versions, reporting bugs, and suggesting numerous improvements.</p></li>
<li><p><a class="reference external" href="https://github.com/altschuler">&#64;altschuler</a> (Simon Altschuler) for fixing <code class="docutils literal notranslate"><span class="pre">&#64;import</span></code> processing inside comments;</p></li>
<li><p><a class="reference external" href="https://github.com/ben-eb">&#64;ben-eb</a> (Ben Briggs) for sharing ideas about CSS optimizations;</p></li>
<li><p><a class="reference external" href="https://github.com/davisjam">&#64;davisjam</a> (Jamie Davis) for disclosing ReDOS vulnerabilities;</p></li>
<li><p><a class="reference external" href="https://github.com/facelessuser">&#64;facelessuser</a> (Isaac) for pointing out a flaw in clean-css’ stateless mode;</p></li>
<li><p><a class="reference external" href="https://github.com/grandrath">&#64;grandrath</a> (Martin Grandrath) for improving <code class="docutils literal notranslate"><span class="pre">minify</span></code> method source traversal in ES6;</p></li>
<li><p><a class="reference external" href="https://github.com/jmalonzo">&#64;jmalonzo</a> (Jan Michael Alonzo) for a patch removing node.js’ old <code class="docutils literal notranslate"><span class="pre">sys</span></code> package;</p></li>
<li><p><a class="reference external" href="https://github.com/lukeapage">&#64;lukeapage</a> (Luke Page) for suggestions and testing the source maps feature;
Plus everyone else involved in <a class="reference external" href="https://github.com/jakubpawlowicz/clean-css/issues/125">#125</a> for pushing it forward;</p></li>
<li><p><a class="reference external" href="https://github.com/madwizard-thomas">&#64;madwizard-thomas</a> for sharing ideas about <code class="docutils literal notranslate"><span class="pre">&#64;import</span></code> inlining and URL rebasing.</p></li>
<li><p><a class="reference external" href="https://github.com/ngyikp">&#64;ngyikp</a> (Ng Yik Phang) for testing early clean-css 4 versions, reporting bugs, and suggesting numerous improvements.</p></li>
<li><p><a class="reference external" href="https://github.com/wagenet">&#64;wagenet</a> (Peter Wagenet) for suggesting improvements to <code class="docutils literal notranslate"><span class="pre">&#64;import</span></code> inlining behavior;</p></li>
<li><p><a class="reference external" href="https://github.com/venemo">&#64;venemo</a> (Timur Kristóf) for an outstanding contribution of advanced property optimizer for 2.2 release;</p></li>
<li><p><a class="reference external" href="https://github.com/vvo">&#64;vvo</a> (Vincent Voyer) for a patch with better empty element regex and for inspiring us to do many performance improvements in 0.4 release;</p></li>
<li><p><a class="reference external" href="https://github.com/xhmikosr">&#64;xhmikosr</a> for suggesting new features, like option to remove special comments and strip out URLs quotation, and pointing out numerous improvements like JSHint, media queries, etc.</p></li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="license">
<h1>License<a class="headerlink" href="#license" title="Permalink to this headline">#</a></h1>
<p>clean-css is released under the <a class="reference external" href="https://github.com/jakubpawlowicz/clean-css/blob/master/LICENSE">MIT License</a>.</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./reveal/node_modules/clean-css"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Mark S. Baldwin<br/>
  
      &copy; Copyright 2023.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>