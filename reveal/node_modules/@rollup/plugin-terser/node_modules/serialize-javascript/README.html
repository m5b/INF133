
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Serialize JavaScript &#8212; INF 133 Fall 2023</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../../../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../../../../" id="documentation_options" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../../_static/copybutton.js"></script>
    <script src="../../../../../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../../../../_static/logo_stacked.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">INF 133 Fall 2023</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../../../../index.html">
                    User Interaction Software
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Assignments
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../assignments/a0.html">
   Assignment 0
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../assignments/a1.html">
   Assignment 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../assignments/a2.html">
   Assignment 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../assignments/a3.html">
   Assignment 3
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../assignments/a4.html">
   Assignment 4
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../assignments/a5.html">
   Assignment 5
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Weekly Notes
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../notes/wk1.html">
   Week 1 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../notes/wk2.html">
   Week 2 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../notes/wk3.html">
   Week 3 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../notes/wk4.html">
   Week 4 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../notes/wk5.html">
   Week 5 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../notes/wk6.html">
   Week 6 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../notes/wk7.html">
   Week 7 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../notes/wk8.html">
   Week 8 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../notes/wk9.html">
   Week 9 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../notes/wk10.html">
   Week 10 Notes
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Course Resources
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../resources.html">
   Resources
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../../../../_sources/reveal/node_modules/@rollup/plugin-terser/node_modules/serialize-javascript/README.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   Overview
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#usage">
   Usage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#automatic-escaping-of-html-characters">
     Automatic Escaping of HTML Characters
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#options">
     Options
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#options-space">
       <code class="docutils literal notranslate">
        <span class="pre">
         options.space
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#options-isjson">
       <code class="docutils literal notranslate">
        <span class="pre">
         options.isJSON
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#options-unsafe">
       <code class="docutils literal notranslate">
        <span class="pre">
         options.unsafe
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#options-ignorefunction">
       <code class="docutils literal notranslate">
        <span class="pre">
         options.ignoreFunction
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#deserializing">
   Deserializing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#license">
   License
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Serialize JavaScript</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   Overview
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#usage">
   Usage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#automatic-escaping-of-html-characters">
     Automatic Escaping of HTML Characters
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#options">
     Options
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#options-space">
       <code class="docutils literal notranslate">
        <span class="pre">
         options.space
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#options-isjson">
       <code class="docutils literal notranslate">
        <span class="pre">
         options.isJSON
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#options-unsafe">
       <code class="docutils literal notranslate">
        <span class="pre">
         options.unsafe
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#options-ignorefunction">
       <code class="docutils literal notranslate">
        <span class="pre">
         options.ignoreFunction
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#deserializing">
   Deserializing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#license">
   License
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="serialize-javascript">
<h1>Serialize JavaScript<a class="headerlink" href="#serialize-javascript" title="Permalink to this headline">#</a></h1>
<p>Serialize JavaScript to a <em>superset</em> of JSON that includes regular expressions, dates and functions.</p>
<p><a class="reference external" href="https://www.npmjs.org/package/serialize-javascript"><img alt="npm Version" src="https://img.shields.io/npm/v/serialize-javascript.svg?style=flat-square" /></a>
<a class="reference external" href="https://david-dm.org/yahoo/serialize-javascript"><img alt="Dependency Status" src="https://img.shields.io/david/yahoo/serialize-javascript.svg?style=flat-square" /></a>
<img alt="Test" src="https://github.com/yahoo/serialize-javascript/workflows/Test/badge.svg" /></p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">#</a></h2>
<p>The code in this package began its life as an internal module to <a class="reference external" href="https://github.com/yahoo/express-state">express-state</a>. To expand its usefulness, it now lives as <code class="docutils literal notranslate"><span class="pre">serialize-javascript</span></code> — an independent package on npm.</p>
<p>You’re probably wondering: <strong>What about <code class="docutils literal notranslate"><span class="pre">JSON.stringify()</span></code>!?</strong> We’ve found that sometimes we need to serialize JavaScript <strong>functions</strong>, <strong>regexps</strong>, <strong>dates</strong>, <strong>sets</strong> or <strong>maps</strong>. A great example is a web app that uses client-side URL routing where the route definitions are regexps that need to be shared from the server to the client. But this module is also great for communicating between node processes.</p>
<p>The string returned from this package’s single export function is literal JavaScript which can be saved to a <code class="docutils literal notranslate"><span class="pre">.js</span></code> file, or be embedded into an HTML document by making the content of a <code class="docutils literal notranslate"><span class="pre">&lt;script&gt;</span></code> element.</p>
<blockquote>
<div><p><strong>HTML characters and JavaScript line terminators are escaped automatically.</strong></p>
</div></blockquote>
<p>Please note that serialization for ES6 Sets &amp; Maps requires support for <code class="docutils literal notranslate"><span class="pre">Array.from</span></code> (not available in IE or Node &lt; 0.12), or an <code class="docutils literal notranslate"><span class="pre">Array.from</span></code> polyfill.</p>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">#</a></h2>
<p>Install using npm:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>npm<span class="w"> </span>install<span class="w"> </span>serialize-javascript
</pre></div>
</div>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">#</a></h2>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">serialize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;serialize-javascript&#39;</span><span class="p">);</span>

<span class="nx">serialize</span><span class="p">({</span>
<span class="w">    </span><span class="nx">str</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">num</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span>
<span class="w">    </span><span class="nx">obj</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">foo</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;foo&#39;</span><span class="p">},</span>
<span class="w">    </span><span class="nx">arr</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">],</span>
<span class="w">    </span><span class="nx">bool</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nx">nil</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nx">undef</span><span class="o">:</span><span class="w"> </span><span class="kc">undefined</span><span class="p">,</span>
<span class="w">    </span><span class="nx">inf</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="kc">Infinity</span><span class="p">,</span>
<span class="w">    </span><span class="nx">date</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(</span><span class="s2">&quot;Thu, 28 Apr 2016 22:02:17 GMT&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="nx">map</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">([[</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;world&#39;</span><span class="p">]]),</span>
<span class="w">    </span><span class="nx">set</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Set</span><span class="p">([</span><span class="mf">123</span><span class="p">,</span><span class="w"> </span><span class="mf">456</span><span class="p">]),</span>
<span class="w">    </span><span class="nx">fn</span><span class="w">   </span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">echo</span><span class="p">(</span><span class="nx">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">arg</span><span class="p">;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nx">re</span><span class="w">   </span><span class="o">:</span><span class="w"> </span><span class="sr">/([^\s]+)/g</span><span class="p">,</span>
<span class="w">    </span><span class="nx">big</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="nb">BigInt</span><span class="p">(</span><span class="mf">10</span><span class="p">),</span>
<span class="p">});</span>
</pre></div>
</div>
<p>The above will produce the following string output:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;{&quot;str&quot;:&quot;string&quot;,&quot;num&quot;:0,&quot;obj&quot;:{&quot;foo&quot;:&quot;foo&quot;},&quot;arr&quot;:[1,2,3],&quot;bool&quot;:true,&quot;nil&quot;:null,&quot;undef&quot;:undefined,&quot;inf&quot;:Infinity,&quot;date&quot;:new Date(&quot;2016-04-28T22:02:17.000Z&quot;),&quot;map&quot;:new Map([[&quot;hello&quot;,&quot;world&quot;]]),&quot;set&quot;:new Set([123,456]),&quot;fn&quot;:function echo(arg) { return arg; },&quot;re&quot;:new RegExp(&quot;([^\\\\s]+)&quot;, &quot;g&quot;),&quot;big&quot;:BigInt(&quot;10&quot;)}&#39;</span>
</pre></div>
</div>
<p>Note: to produced a beautified string, you can pass an optional second argument to <code class="docutils literal notranslate"><span class="pre">serialize()</span></code> to define the number of spaces to be used for the indentation.</p>
<section id="automatic-escaping-of-html-characters">
<h3>Automatic Escaping of HTML Characters<a class="headerlink" href="#automatic-escaping-of-html-characters" title="Permalink to this headline">#</a></h3>
<p>A primary feature of this package is to serialize code to a string of literal JavaScript which can be embedded in an HTML document by adding it as the contents of the <code class="docutils literal notranslate"><span class="pre">&lt;script&gt;</span></code> element. In order to make this safe, HTML characters and JavaScript line terminators are escaped automatically.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">serialize</span><span class="p">({</span>
<span class="w">    </span><span class="nx">haxorXSS</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&lt;/script&gt;&#39;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>The above will produce the following string, HTML-escaped output which is safe to put into an HTML document as it will not cause the inline script element to terminate:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;{&quot;haxorXSS&quot;:&quot;\\u003C\\u002Fscript\\u003E&quot;}&#39;</span>
</pre></div>
</div>
<blockquote>
<div><p>You can pass an optional <code class="docutils literal notranslate"><span class="pre">unsafe</span></code> argument to <code class="docutils literal notranslate"><span class="pre">serialize()</span></code> for straight serialization.</p>
</div></blockquote>
</section>
<section id="options">
<h3>Options<a class="headerlink" href="#options" title="Permalink to this headline">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">serialize()</span></code> function accepts an <code class="docutils literal notranslate"><span class="pre">options</span></code> object as its second argument. All options are being defaulted to <code class="docutils literal notranslate"><span class="pre">undefined</span></code>:</p>
<section id="options-space">
<h4><code class="docutils literal notranslate"><span class="pre">options.space</span></code><a class="headerlink" href="#options-space" title="Permalink to this headline">#</a></h4>
<p>This option is the same as the <code class="docutils literal notranslate"><span class="pre">space</span></code> argument that can be passed to <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify"><code class="docutils literal notranslate"><span class="pre">JSON.stringify</span></code></a>. It can be used to add whitespace and indentation to the serialized output to make it more readable.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">serialize</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">space</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">});</span>
</pre></div>
</div>
</section>
<section id="options-isjson">
<h4><code class="docutils literal notranslate"><span class="pre">options.isJSON</span></code><a class="headerlink" href="#options-isjson" title="Permalink to this headline">#</a></h4>
<p>This option is a signal to <code class="docutils literal notranslate"><span class="pre">serialize()</span></code> that the object being serialized does not contain any function or regexps values. This enables a hot-path that allows serialization to be over 3x faster. If you’re serializing a lot of data, and know its pure JSON, then you can enable this option for a speed-up.</p>
<p><strong>Note:</strong> That when using this option, the output will still be escaped to protect against XSS.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">serialize</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">isJSON</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">});</span>
</pre></div>
</div>
</section>
<section id="options-unsafe">
<h4><code class="docutils literal notranslate"><span class="pre">options.unsafe</span></code><a class="headerlink" href="#options-unsafe" title="Permalink to this headline">#</a></h4>
<p>This option is to signal <code class="docutils literal notranslate"><span class="pre">serialize()</span></code> that we want to do a straight conversion, without the XSS protection. This options needs to be explicitly set to <code class="docutils literal notranslate"><span class="pre">true</span></code>. HTML characters and JavaScript line terminators will not be escaped. You will have to roll your own.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">serialize</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">unsafe</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">});</span>
</pre></div>
</div>
</section>
<section id="options-ignorefunction">
<h4><code class="docutils literal notranslate"><span class="pre">options.ignoreFunction</span></code><a class="headerlink" href="#options-ignorefunction" title="Permalink to this headline">#</a></h4>
<p>This option is to signal <code class="docutils literal notranslate"><span class="pre">serialize()</span></code> that we do not want serialize JavaScript function.
Just treat function like <code class="docutils literal notranslate"><span class="pre">JSON.stringify</span></code> do, but other features will work as expected.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">serialize</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="nx">ignoreFunction</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">});</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="deserializing">
<h2>Deserializing<a class="headerlink" href="#deserializing" title="Permalink to this headline">#</a></h2>
<p>For some use cases you might also need to deserialize the string. This is explicitly not part of this module. However, you can easily write it yourself:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">deserialize</span><span class="p">(</span><span class="nx">serializedJavascript</span><span class="p">){</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">serializedJavascript</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;)&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Note:</strong> Don’t forget the parentheses around the serialized javascript, as the opening bracket <code class="docutils literal notranslate"><span class="pre">{</span></code> will be considered to be the start of a body.</p>
</section>
<section id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">#</a></h2>
<p>This software is free to use under the Yahoo! Inc. BSD license.
See the <a class="reference external" href="https://github.com/yahoo/serialize-javascript/blob/main/LICENSE">LICENSE file</a> for license text and copyright information.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./reveal/node_modules/@rollup/plugin-terser/node_modules/serialize-javascript"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Mark S. Baldwin<br/>
  
      &copy; Copyright 2023.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>