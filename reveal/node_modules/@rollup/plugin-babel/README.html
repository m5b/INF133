
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>@rollup/plugin-babel &#8212; INF 133 Fall 2023</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/clipboard.min.js"></script>
    <script src="../../../../_static/copybutton.js"></script>
    <script src="../../../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../../_static/logo_stacked.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">INF 133 Fall 2023</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../../index.html">
                    User Interaction Software
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Assignments
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../assignments/a0.html">
   Assignment 0
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../assignments/a1.html">
   Assignment 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../assignments/a2.html">
   Assignment 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../assignments/a3.html">
   Assignment 3
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../assignments/a4.html">
   Assignment 4
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../assignments/a5.html">
   Assignment 5
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Weekly Notes
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../notes/wk1.html">
   Week 1 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../notes/wk2.html">
   Week 2 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../notes/wk3.html">
   Week 3 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../notes/wk4.html">
   Week 4 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../notes/wk5.html">
   Week 5 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../notes/wk6.html">
   Week 6 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../notes/wk7.html">
   Week 7 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../notes/wk8.html">
   Week 8 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../notes/wk9.html">
   Week 9 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../notes/wk10.html">
   Week 10 Notes
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Course Resources
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../resources.html">
   Resources
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../../_sources/reveal/node_modules/@rollup/plugin-babel/README.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#why">
   Why?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#requirements">
   Requirements
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install">
   Install
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#usage">
   Usage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-with-rollup-plugin-commonjs">
     Using With
     <code class="docutils literal notranslate">
      <span class="pre">
       @rollup/plugin-commonjs
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#options">
   Options
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exclude">
     <code class="docutils literal notranslate">
      <span class="pre">
       exclude
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#include">
     <code class="docutils literal notranslate">
      <span class="pre">
       include
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#filter">
     <code class="docutils literal notranslate">
      <span class="pre">
       filter
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#extensions">
     <code class="docutils literal notranslate">
      <span class="pre">
       extensions
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#babelhelpers">
     <code class="docutils literal notranslate">
      <span class="pre">
       babelHelpers
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#skippreflightcheck">
     <code class="docutils literal notranslate">
      <span class="pre">
       skipPreflightCheck
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#external-dependencies">
     External dependencies
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#helpers">
     Helpers
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#modules">
     Modules
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-babel-on-the-generated-code">
   Running Babel on the generated code
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#babel-configuration-files">
     Babel configuration files
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-formats-other-than-es-modules-or-commonjs">
     Using formats other than ES modules or CommonJS
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#injected-helpers">
     Injected helpers
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#custom-plugin-builder">
   Custom plugin builder
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example">
     Example
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#meta">
   Meta
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>@rollup/plugin-babel</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#why">
   Why?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#requirements">
   Requirements
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install">
   Install
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#usage">
   Usage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-with-rollup-plugin-commonjs">
     Using With
     <code class="docutils literal notranslate">
      <span class="pre">
       @rollup/plugin-commonjs
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#options">
   Options
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exclude">
     <code class="docutils literal notranslate">
      <span class="pre">
       exclude
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#include">
     <code class="docutils literal notranslate">
      <span class="pre">
       include
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#filter">
     <code class="docutils literal notranslate">
      <span class="pre">
       filter
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#extensions">
     <code class="docutils literal notranslate">
      <span class="pre">
       extensions
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#babelhelpers">
     <code class="docutils literal notranslate">
      <span class="pre">
       babelHelpers
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#skippreflightcheck">
     <code class="docutils literal notranslate">
      <span class="pre">
       skipPreflightCheck
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#external-dependencies">
     External dependencies
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#helpers">
     Helpers
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#modules">
     Modules
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-babel-on-the-generated-code">
   Running Babel on the generated code
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#babel-configuration-files">
     Babel configuration files
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-formats-other-than-es-modules-or-commonjs">
     Using formats other than ES modules or CommonJS
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#injected-helpers">
     Injected helpers
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#custom-plugin-builder">
   Custom plugin builder
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example">
     Example
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#meta">
   Meta
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <p><a class="reference external" href="https://www.npmjs.com/package/&#64;rollup/plugin-babel"><img alt="npm" src="https://img.shields.io/npm/v/&#64;rollup/plugin-babel" /></a>
<a class="reference external" href="https://packagephobia.now.sh/result?p=&#64;rollup/plugin-babel"><img alt="size" src="https://packagephobia.now.sh/badge?p=&#64;rollup/plugin-babel" /></a>
<a class="reference external" href="https://liberamanifesto.com"><img alt="libera manifesto" src="https://img.shields.io/badge/libera-manifesto-lightgrey.svg" /></a></p>
<section class="tex2jax_ignore mathjax_ignore" id="rollup-plugin-babel">
<h1>&#64;rollup/plugin-babel<a class="headerlink" href="#rollup-plugin-babel" title="Permalink to this headline">#</a></h1>
<p>🍣 A Rollup plugin for seamless integration between Rollup and Babel.</p>
<section id="why">
<h2>Why?<a class="headerlink" href="#why" title="Permalink to this headline">#</a></h2>
<p>If you’re using Babel to transpile your ES6/7 code and Rollup to generate a standalone bundle, you have a couple of options:</p>
<ul class="simple">
<li><p>run the code through Babel first, being careful to exclude the module transformer, or</p></li>
<li><p>run the code through Rollup first, and <em>then</em> pass it to Babel.</p></li>
</ul>
<p>Both approaches have disadvantages – in the first case, on top of the additional configuration complexity, you may end up with Babel’s helpers (like <code class="docutils literal notranslate"><span class="pre">classCallCheck</span></code>) repeated throughout your code (once for each module where the helpers are used). In the second case, transpiling is likely to be slower, because transpiling a large bundle is much more work for Babel than transpiling a set of small files.</p>
<p>Either way, you have to worry about a place to put the intermediate files, and getting sourcemaps to behave becomes a royal pain.</p>
<p>Using Rollup with <code class="docutils literal notranslate"><span class="pre">&#64;rollup/plugin-babel</span></code> makes the process far easier.</p>
</section>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">#</a></h2>
<p>This plugin requires an <a class="reference external" href="https://github.com/nodejs/Release">LTS</a> Node version (v14.0.0+) and Rollup v1.20.0+.</p>
</section>
<section id="install">
<h2>Install<a class="headerlink" href="#install" title="Permalink to this headline">#</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>npm<span class="w"> </span>install<span class="w"> </span>@rollup/plugin-babel<span class="w"> </span>--save-dev
</pre></div>
</div>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">#</a></h2>
<p>Create a <code class="docutils literal notranslate"><span class="pre">rollup.config.js</span></code> <a class="reference external" href="https://www.rollupjs.org/guide/en/#configuration-files">configuration file</a> and import the plugin:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">babel</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@rollup/plugin-babel&#39;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">input</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;src/index.js&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">output</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">dir</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;output&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;es&#39;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">babel</span><span class="p">({</span><span class="w"> </span><span class="nx">babelHelpers</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bundled&#39;</span><span class="w"> </span><span class="p">})]</span>
<span class="p">};</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">config</span><span class="p">;</span>
</pre></div>
</div>
<p>Then call <code class="docutils literal notranslate"><span class="pre">rollup</span></code> either via the <a class="reference external" href="https://www.rollupjs.org/guide/en/#command-line-reference">CLI</a> or the <a class="reference external" href="https://www.rollupjs.org/guide/en/#javascript-api">API</a>.</p>
<section id="using-with-rollup-plugin-commonjs">
<h3>Using With <code class="docutils literal notranslate"><span class="pre">&#64;rollup/plugin-commonjs</span></code><a class="headerlink" href="#using-with-rollup-plugin-commonjs" title="Permalink to this headline">#</a></h3>
<p>When using <code class="docutils literal notranslate"><span class="pre">&#64;rollup/plugin-babel</span></code> with <code class="docutils literal notranslate"><span class="pre">&#64;rollup/plugin-commonjs</span></code> in the same Rollup configuration, it’s important to note that <code class="docutils literal notranslate"><span class="pre">&#64;rollup/plugin-commonjs</span></code> <em>must</em> be placed before this plugin in the <code class="docutils literal notranslate"><span class="pre">plugins</span></code> array for the two to work together properly. e.g.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">babel</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@rollup/plugin-babel&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">commonjs</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@rollup/plugin-commonjs&#39;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">...</span>
<span class="w">  </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="nx">commonjs</span><span class="p">(),</span>
<span class="w">    </span><span class="nx">babel</span><span class="p">({</span><span class="w"> </span><span class="nx">babelHelpers</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bundled&#39;</span><span class="w"> </span><span class="p">})</span>
<span class="w">  </span><span class="p">],</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
</section>
<section id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">#</a></h2>
<p>This plugin respects Babel <a class="reference external" href="https://babeljs.io/docs/en/configuration">configuration files</a> by default and they are generally the best place to put your configuration.</p>
<p>You can also run Babel on the generated chunks instead of the input files. Even though this is slower, it is the only way to transpile Rollup’s auto-generated wrapper code to lower compatibility targets than ES5, see <a class="reference external" href="#running-babel-on-the-generated-code">Running Babel on the generated code</a> for details.</p>
<p>All options are as per the <a class="reference external" href="https://babeljs.io/docs/en/options">Babel documentation</a>, plus the following:</p>
<section id="exclude">
<h3><code class="docutils literal notranslate"><span class="pre">exclude</span></code><a class="headerlink" href="#exclude" title="Permalink to this headline">#</a></h3>
<p>Type: <code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">|</span> <span class="pre">RegExp</span> <span class="pre">|</span> <span class="pre">Array[...String|RegExp]</span></code><br></p>
<p>A <a class="reference external" href="https://github.com/micromatch/picomatch">picomatch pattern</a>, or array of patterns, which specifies the files in the build the plugin should <em>ignore</em>. When relying on Babel configuration files you can only exclude additional files with this option, you cannot override what you have configured for Babel itself.</p>
</section>
<section id="include">
<h3><code class="docutils literal notranslate"><span class="pre">include</span></code><a class="headerlink" href="#include" title="Permalink to this headline">#</a></h3>
<p>Type: <code class="docutils literal notranslate"><span class="pre">String</span> <span class="pre">|</span> <span class="pre">RegExp</span> <span class="pre">|</span> <span class="pre">Array[...String|RegExp]</span></code><br></p>
<p>A <a class="reference external" href="https://github.com/micromatch/picomatch">picomatch pattern</a>, or array of patterns, which specifies the files in the build the plugin should operate on. When relying on Babel configuration files you cannot include files already excluded there.</p>
</section>
<section id="filter">
<h3><code class="docutils literal notranslate"><span class="pre">filter</span></code><a class="headerlink" href="#filter" title="Permalink to this headline">#</a></h3>
<p>Type: (id: string) =&gt; boolean<br></p>
<p>Custom <a class="reference external" href="https://github.com/rollup/plugins/tree/master/packages/pluginutils#createfilter">filter function</a> can be used to determine whether or not certain modules should be operated upon.</p>
<p>Usage:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createFilter</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@rollup/pluginutils&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">include</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;include/**.js&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">exclude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;exclude/**.js&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createFilter</span><span class="p">(</span><span class="nx">include</span><span class="p">,</span><span class="w"> </span><span class="nx">exclude</span><span class="p">,</span><span class="w"> </span><span class="p">{});</span>
</pre></div>
</div>
</section>
<section id="extensions">
<h3><code class="docutils literal notranslate"><span class="pre">extensions</span></code><a class="headerlink" href="#extensions" title="Permalink to this headline">#</a></h3>
<p>Type: <code class="docutils literal notranslate"><span class="pre">Array[...String]</span></code><br>
Default: <code class="docutils literal notranslate"><span class="pre">['.js',</span> <span class="pre">'.jsx',</span> <span class="pre">'.es6',</span> <span class="pre">'.es',</span> <span class="pre">'.mjs']</span></code></p>
<p>An array of file extensions that Babel should transpile. If you want to transpile TypeScript files with this plugin it’s essential to include <code class="docutils literal notranslate"><span class="pre">.ts</span></code> and <code class="docutils literal notranslate"><span class="pre">.tsx</span></code> in this option.</p>
</section>
<section id="babelhelpers">
<h3><code class="docutils literal notranslate"><span class="pre">babelHelpers</span></code><a class="headerlink" href="#babelhelpers" title="Permalink to this headline">#</a></h3>
<p>Type: <code class="docutils literal notranslate"><span class="pre">'bundled'</span> <span class="pre">|</span> <span class="pre">'runtime'</span> <span class="pre">|</span> <span class="pre">'inline'</span> <span class="pre">|</span> <span class="pre">'external'</span></code><br>
Default: <code class="docutils literal notranslate"><span class="pre">'bundled'</span></code></p>
<p>It is recommended to configure this option explicitly (even if with its default value) so an informed decision is taken on how those babel helpers are inserted into the code.</p>
<p>We recommend to follow these guidelines to determine the most appropriate value for your project:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'runtime'</span></code> - you should use this especially when building libraries with Rollup. It has to be used in combination with <code class="docutils literal notranslate"><span class="pre">&#64;babel/plugin-transform-runtime</span></code> and you should also specify <code class="docutils literal notranslate"><span class="pre">&#64;babel/runtime</span></code> as dependency of your package. Don’t forget to tell Rollup to treat the helpers imported from within the <code class="docutils literal notranslate"><span class="pre">&#64;babel/runtime</span></code> module as external dependencies when bundling for <code class="docutils literal notranslate"><span class="pre">cjs</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">es</span></code> formats. This can be accomplished via regex (<code class="docutils literal notranslate"><span class="pre">external:</span> <span class="pre">[/&#64;babel\/runtime/]</span></code>) or a function (<code class="docutils literal notranslate"><span class="pre">external:</span> <span class="pre">id</span> <span class="pre">=&gt;</span> <span class="pre">id.includes('&#64;babel/runtime')</span></code>). It’s important to not only specify <code class="docutils literal notranslate"><span class="pre">external:</span> <span class="pre">['&#64;babel/runtime']</span></code> since the helpers are imported from nested paths (e.g <code class="docutils literal notranslate"><span class="pre">&#64;babel/runtime/helpers/get</span></code>) and <a class="reference external" href="https://rollupjs.org/guide/en/#peer-dependencies">Rollup will only exclude modules that match strings exactly</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'bundled'</span></code> - you should use this if you want your resulting bundle to contain those helpers (at most one copy of each). Useful especially if you bundle an application code.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'external'</span></code> - use this only if you know what you are doing. It will reference helpers on <strong>global</strong> <code class="docutils literal notranslate"><span class="pre">babelHelpers</span></code> object. Used in combination with <code class="docutils literal notranslate"><span class="pre">&#64;babel/plugin-external-helpers</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'inline'</span></code> - this is not recommended. Helpers will be inserted in each file using this option. This can cause serious code duplication. This is the default Babel behavior as Babel operates on isolated files - however, as Rollup is a bundler and is project-aware (and therefore likely operating across multiple input files), the default of this plugin is <code class="docutils literal notranslate"><span class="pre">&quot;bundled&quot;</span></code>.</p></li>
</ul>
</section>
<section id="skippreflightcheck">
<h3><code class="docutils literal notranslate"><span class="pre">skipPreflightCheck</span></code><a class="headerlink" href="#skippreflightcheck" title="Permalink to this headline">#</a></h3>
<p>Type: <code class="docutils literal notranslate"><span class="pre">Boolean</span></code><br>
Default: <code class="docutils literal notranslate"><span class="pre">false</span></code></p>
<p>Before transpiling your input files this plugin also transpile a short piece of code <strong>for each</strong> input file. This is used to validate some misconfiguration errors, but for sufficiently big projects it can slow your build times so if you are confident about your configuration then you might disable those checks with this option.</p>
</section>
<section id="external-dependencies">
<h3>External dependencies<a class="headerlink" href="#external-dependencies" title="Permalink to this headline">#</a></h3>
<p>Ideally, you should only be transforming your source code, rather than running all of your external dependencies through Babel (to ignore external dependencies from being handled by this plugin you might use <code class="docutils literal notranslate"><span class="pre">exclude:</span> <span class="pre">'node_modules/**'</span></code> option). If you have a dependency that exposes untranspiled ES6 source code that doesn’t run in your target environment, then you may need to break this rule, but it often causes problems with unusual <code class="docutils literal notranslate"><span class="pre">.babelrc</span></code> files or mismatched versions of Babel.</p>
<p>We encourage library authors not to distribute code that uses untranspiled ES6 features (other than modules) for this reason. Consumers of your library should <em>not</em> have to transpile your ES6 code, any more than they should have to transpile your CoffeeScript, ClojureScript or TypeScript.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">babelrc:</span> <span class="pre">false</span></code> to prevent Babel from using local (i.e. to your external dependencies) <code class="docutils literal notranslate"><span class="pre">.babelrc</span></code> files, relying instead on the configuration you pass in.</p>
</section>
<section id="helpers">
<h3>Helpers<a class="headerlink" href="#helpers" title="Permalink to this headline">#</a></h3>
<p>In some cases Babel uses <em>helpers</em> to avoid repeating chunks of code – for example, if you use the <code class="docutils literal notranslate"><span class="pre">class</span></code> keyword, it will use a <code class="docutils literal notranslate"><span class="pre">classCallCheck</span></code> function to ensure that the class is instantiated correctly.</p>
<p>By default, those helpers will be inserted at the top of the file being transformed, which can lead to duplication. This rollup plugin automatically deduplicates those helpers, keeping only one copy of each one used in the output bundle. Rollup will combine the helpers in a single block at the top of your bundle.</p>
<p>You can customize how those helpers are being inserted into the transformed file with <a class="reference external" href="#babelhelpers"><code class="docutils literal notranslate"><span class="pre">babelHelpers</span></code></a> option.</p>
</section>
<section id="modules">
<h3>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">#</a></h3>
<p>This is not needed since Babel 7 - it knows automatically that Rollup understands ES modules &amp; that it shouldn’t use any module transform with it. Unless you forcefully include a module transform in your Babel configuration.</p>
<p>If you have been pointed to this section by an error thrown by this plugin, please check your Babel configuration files and disable any module transforms when running Rollup builds.</p>
</section>
</section>
<section id="running-babel-on-the-generated-code">
<h2>Running Babel on the generated code<a class="headerlink" href="#running-babel-on-the-generated-code" title="Permalink to this headline">#</a></h2>
<p>You can run <code class="docutils literal notranslate"><span class="pre">&#64;rollup/plugin-babel</span></code> on the output files instead of the input files by using <code class="docutils literal notranslate"><span class="pre">getBabelOutputPlugin(...)</span></code>. This can be used to perform code transformations on the resulting chunks and is the only way to transform Rollup’s auto-generated code. By default, the plugin will be applied to all outputs:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// rollup.config.js</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">getBabelOutputPlugin</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@rollup/plugin-babel&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">input</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;main.js&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="nx">getBabelOutputPlugin</span><span class="p">({</span>
<span class="w">      </span><span class="nx">presets</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;@babel/preset-env&#39;</span><span class="p">]</span>
<span class="w">    </span><span class="p">})</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nx">output</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">file</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bundle.cjs.js&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;cjs&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">file</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bundle.es.js&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;es&#39;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">};</span>
</pre></div>
</div>
<p>If you only want to apply it to specific outputs, you can use it as an output plugin (requires at least Rollup v1.27.0):</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// rollup.config.js</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">getBabelOutputPlugin</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@rollup/plugin-babel&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">input</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;main.js&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">output</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nx">file</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bundle.js&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;es&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">file</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bundle.es5.js&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;es&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">getBabelOutputPlugin</span><span class="p">({</span><span class="w"> </span><span class="nx">presets</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;@babel/preset-env&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">})]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">include</span></code>, <code class="docutils literal notranslate"><span class="pre">exclude</span></code> and <code class="docutils literal notranslate"><span class="pre">extensions</span></code> options are ignored when using <code class="docutils literal notranslate"><span class="pre">getBabelOutputPlugin</span></code> and <code class="docutils literal notranslate"><span class="pre">createBabelOutputPluginFactory</span></code> will produce warnings, and there are a few more points to note that users should be aware of.</p>
<p>You can also run the plugin twice on the code, once when processing the input files to transpile special syntax to JavaScript and once on the output to transpile to a lower compatibility target:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// rollup.config.js</span>
<span class="k">import</span><span class="w"> </span><span class="nx">babel</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">getBabelOutputPlugin</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@rollup/plugin-babel&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">input</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;main.js&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">babel</span><span class="p">({</span><span class="w"> </span><span class="nx">presets</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;@babel/preset-react&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">})],</span>
<span class="w">  </span><span class="nx">output</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nx">file</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;bundle.js&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;es&#39;</span><span class="p">,</span>
<span class="w">      </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">getBabelOutputPlugin</span><span class="p">({</span><span class="w"> </span><span class="nx">presets</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;@babel/preset-env&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">})]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">};</span>
</pre></div>
</div>
<section id="babel-configuration-files">
<h3>Babel configuration files<a class="headerlink" href="#babel-configuration-files" title="Permalink to this headline">#</a></h3>
<p>Unlike the regular <code class="docutils literal notranslate"><span class="pre">babel</span></code> plugin, <code class="docutils literal notranslate"><span class="pre">getBabelOutputPlugin(...)</span></code> will <strong>not</strong> automatically search for <a class="reference external" href="https://babeljs.io/docs/en/config-files">Babel configuration files</a>. Besides passing in Babel options directly, however, you can specify a configuration file manually via Babel’s <a class="reference external" href="https://babeljs.io/docs/en/options#configfile"><code class="docutils literal notranslate"><span class="pre">configFile</span></code></a> option:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">getBabelOutputPlugin</span><span class="p">({</span>
<span class="w">  </span><span class="nx">configFile</span><span class="o">:</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;babel.config.js&#39;</span><span class="p">)</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
<section id="using-formats-other-than-es-modules-or-commonjs">
<h3>Using formats other than ES modules or CommonJS<a class="headerlink" href="#using-formats-other-than-es-modules-or-commonjs" title="Permalink to this headline">#</a></h3>
<p>As <code class="docutils literal notranslate"><span class="pre">getBabelOutputPlugin(...)</span></code> will run <em>after</em> Rollup has done all its transformations, it needs to make sure it preserves the semantics of Rollup’s output format. This is especially important for Babel plugins that add, modify or remove imports or exports, but also for other transformations that add new variables as they can accidentally become global variables depending on the format. Therefore it is recommended that for formats other than <code class="docutils literal notranslate"><span class="pre">es</span></code> or <code class="docutils literal notranslate"><span class="pre">cjs</span></code>, you set Rollup to use the <code class="docutils literal notranslate"><span class="pre">es</span></code> output format and let Babel handle the transformation to another format, e.g. via</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">presets</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;@babel/preset-env&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="n">modules</span><span class="p">:</span> <span class="s1">&#39;umd&#39;</span> <span class="p">}],</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>to create a UMD/IIFE compatible output. If you want to use <code class="docutils literal notranslate"><span class="pre">getBabelOutputPlugin(...)</span></code> with other formats, you need to specify <code class="docutils literal notranslate"><span class="pre">allowAllFormats:</span> <span class="pre">true</span></code> as plugin option:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">rollup</span><span class="p">.</span><span class="nx">rollup</span><span class="p">({...})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">bundle</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">bundle</span><span class="p">.</span><span class="nx">generate</span><span class="p">({</span>
<span class="w">  </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;iife&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">getBabelOutputPlugin</span><span class="p">({</span>
<span class="w">    </span><span class="nx">allowAllFormats</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="w">  </span><span class="p">})]</span>
<span class="p">}))</span>
</pre></div>
</div>
</section>
<section id="injected-helpers">
<h3>Injected helpers<a class="headerlink" href="#injected-helpers" title="Permalink to this headline">#</a></h3>
<p>By default, helpers e.g. when transpiling classes will be inserted at the top of each chunk. In contrast to when applying this plugin on the input files, helpers will not be deduplicated across chunks.</p>
<p>Alternatively, you can use imported runtime helpers by adding the <code class="docutils literal notranslate"><span class="pre">&#64;babel/transform-runtime</span></code> plugin. This will make <code class="docutils literal notranslate"><span class="pre">&#64;babel/runtime</span></code> an external dependency of your project, see <a class="reference external" href="https://babeljs.io/docs/en/babel-plugin-transform-runtime">&#64;babel/plugin-transform-runtime</a> for details.</p>
<p>Note that this will only work for <code class="docutils literal notranslate"><span class="pre">es</span></code> and <code class="docutils literal notranslate"><span class="pre">cjs</span></code> formats, and you need to make sure to set the <code class="docutils literal notranslate"><span class="pre">useESModules</span></code> option of <code class="docutils literal notranslate"><span class="pre">&#64;babel/plugin-transform-runtime</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> if you create ES output:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">rollup</span><span class="p">.</span><span class="nx">rollup</span><span class="p">({...})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">bundle</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">bundle</span><span class="p">.</span><span class="nx">generate</span><span class="p">({</span>
<span class="w">  </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;es&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">getBabelOutputPlugin</span><span class="p">({</span>
<span class="w">    </span><span class="nx">presets</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;@babel/preset-env&#39;</span><span class="p">],</span>
<span class="w">    </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[[</span><span class="s1">&#39;@babel/plugin-transform-runtime&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useESModules</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}]]</span>
<span class="w">  </span><span class="p">})]</span>
<span class="p">}))</span>
</pre></div>
</div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// input</span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">Foo</span><span class="w"> </span><span class="p">{}</span>

<span class="c1">// output</span>
<span class="k">import</span><span class="w"> </span><span class="nx">_classCallCheck</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@babel/runtime/helpers/esm/classCallCheck&#39;</span><span class="p">;</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">Foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">_classCallCheck</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="nx">Foo</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">Foo</span><span class="p">;</span>
</pre></div>
</div>
<p>And for CommonJS:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">rollup</span><span class="p">.</span><span class="nx">rollup</span><span class="p">({...})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">bundle</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">bundle</span><span class="p">.</span><span class="nx">generate</span><span class="p">({</span>
<span class="w">  </span><span class="nx">format</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;cjs&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">getBabelOutputPlugin</span><span class="p">({</span>
<span class="w">    </span><span class="nx">presets</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;@babel/preset-env&#39;</span><span class="p">],</span>
<span class="w">    </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[[</span><span class="s1">&#39;@babel/plugin-transform-runtime&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useESModules</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}]]</span>
<span class="w">  </span><span class="p">})]</span>
<span class="p">}))</span>
</pre></div>
</div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// input</span>
<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">Foo</span><span class="w"> </span><span class="p">{}</span>

<span class="c1">// output</span>
<span class="p">(</span><span class="s1">&#39;use strict&#39;</span><span class="p">);</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">_classCallCheck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@babel/runtime/helpers/classCallCheck&#39;</span><span class="p">);</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">Foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">Foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">_classCallCheck</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="nx">Foo</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Foo</span><span class="p">;</span>
</pre></div>
</div>
<p>Another option is to use <code class="docutils literal notranslate"><span class="pre">&#64;babel/plugin-external-helpers</span></code>, which will reference the global <code class="docutils literal notranslate"><span class="pre">babelHelpers</span></code> object. It is your responsibility to make sure this global variable exists.</p>
</section>
</section>
<section id="custom-plugin-builder">
<h2>Custom plugin builder<a class="headerlink" href="#custom-plugin-builder" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">&#64;rollup/plugin-babel</span></code> exposes a plugin-builder utility that allows users to add custom handling of Babel’s configuration for each file that it processes.</p>
<p><code class="docutils literal notranslate"><span class="pre">createBabelInputPluginFactory</span></code> accepts a callback that will be called with the loader’s instance of <code class="docutils literal notranslate"><span class="pre">babel</span></code> so that tooling can ensure that it using exactly the same <code class="docutils literal notranslate"><span class="pre">&#64;babel/core</span></code> instance as the loader itself.</p>
<p>It’s main purpose is to allow other tools for configuration of transpilation without forcing people to add extra configuration but still allow for using their own babelrc / babel config files.</p>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">#</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createBabelInputPluginFactory</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@rollup/plugin-babel&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="nx">createBabelInputPluginFactory</span><span class="p">((</span><span class="nx">babelCore</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">function</span><span class="w"> </span><span class="nx">myPlugin</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">visitor</span><span class="o">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Passed the plugin options.</span>
<span class="w">    </span><span class="nx">options</span><span class="p">({</span><span class="w"> </span><span class="nx">opt1</span><span class="p">,</span><span class="w"> </span><span class="nx">opt2</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">pluginOptions</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Pull out any custom options that the plugin might have.</span>
<span class="w">        </span><span class="nx">customOptions</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">opt1</span><span class="p">,</span><span class="w"> </span><span class="nx">opt2</span><span class="w"> </span><span class="p">},</span>

<span class="w">        </span><span class="c1">// Pass the options back with the two custom options removed.</span>
<span class="w">        </span><span class="nx">pluginOptions</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">    </span><span class="p">},</span>

<span class="w">    </span><span class="nx">config</span><span class="p">(</span><span class="nx">cfg</span><span class="w"> </span><span class="cm">/* Passed Babel&#39;s &#39;PartialConfig&#39; object. */</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">code</span><span class="p">,</span><span class="w"> </span><span class="nx">customOptions</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">cfg</span><span class="p">.</span><span class="nx">hasFilesystemConfig</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Use the normal config</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">cfg</span><span class="p">.</span><span class="nx">options</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>

<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">...</span><span class="nx">cfg</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span>
<span class="w">        </span><span class="nx">plugins</span><span class="o">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">          </span><span class="p">...(</span><span class="nx">cfg</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">plugins</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">[]),</span>

<span class="w">          </span><span class="c1">// Include a custom plugin in the options.</span>
<span class="w">          </span><span class="nx">myPlugin</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">    </span><span class="p">},</span>

<span class="w">    </span><span class="nx">result</span><span class="p">(</span><span class="nx">result</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">code</span><span class="p">,</span><span class="w"> </span><span class="nx">customOptions</span><span class="p">,</span><span class="w"> </span><span class="nx">config</span><span class="p">,</span><span class="w"> </span><span class="nx">transformOptions</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">...</span><span class="nx">result</span><span class="p">,</span>
<span class="w">        </span><span class="nx">code</span><span class="o">:</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">code</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;\n// Generated by some custom plugin&#39;</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
</section>
<section id="meta">
<h2>Meta<a class="headerlink" href="#meta" title="Permalink to this headline">#</a></h2>
<p><span class="xref myst">CONTRIBUTING</span></p>
<p><span class="xref myst">LICENSE (MIT)</span></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./reveal/node_modules/@rollup/plugin-babel"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Mark S. Baldwin<br/>
  
      &copy; Copyright 2023.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>