
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Immutable collections for JavaScript &#8212; INF 133 Fall 2023</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../_static/logo_stacked.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">INF 133 Fall 2023</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../index.html">
                    User Interaction Software
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Assignments
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/a0.html">
   Assignment 0
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/a1.html">
   Assignment 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/a2.html">
   Assignment 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/a3.html">
   Assignment 3
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/a4.html">
   Assignment 4
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/a5.html">
   Assignment 5
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Weekly Notes
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk1.html">
   Week 1 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk2.html">
   Week 2 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk3.html">
   Week 3 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk4.html">
   Week 4 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk5.html">
   Week 5 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk6.html">
   Week 6 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk7.html">
   Week 7 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk8.html">
   Week 8 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk9.html">
   Week 9 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk10.html">
   Week 10 Notes
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Course Resources
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../resources.html">
   Resources
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../_sources/reveal/node_modules/immutable/README.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   Introduction
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#getting-started">
   Getting started
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#browser">
     Browser
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#flow-typescript">
     Flow &amp; TypeScript
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#using-typescript-with-immutable-js-v4">
       Using TypeScript with Immutable.js v4
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#using-typescript-with-immutable-js-v3-and-earlier">
       Using TypeScript with Immutable.js v3 and earlier:
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-case-for-immutability">
   The case for Immutability
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#javascript-first-api">
   JavaScript-first API
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#convert-from-raw-javascript-objects-and-arrays">
     Convert from raw JavaScript objects and arrays.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#converts-back-to-raw-javascript-objects">
     Converts back to raw JavaScript objects.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#embraces-es2015">
     Embraces ES2015
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#nested-structures">
   Nested Structures
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#equality-treats-collections-as-values">
   Equality treats Collections as Values
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#performance-tradeoffs">
     Performance tradeoffs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#return-self-on-no-op-optimization">
     Return self on no-op optimization
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#batching-mutations">
   Batching Mutations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lazy-seq">
   Lazy Seq
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#comparison-of-filter-groupby-and-partition">
   Comparison of filter(), groupBy(), and partition()
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#additional-tools-and-resources">
   Additional Tools and Resources
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contributing">
   Contributing
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#changelog">
     Changelog
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#license">
     License
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#thanks">
     Thanks
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Immutable collections for JavaScript</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   Introduction
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#getting-started">
   Getting started
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#browser">
     Browser
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#flow-typescript">
     Flow &amp; TypeScript
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#using-typescript-with-immutable-js-v4">
       Using TypeScript with Immutable.js v4
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#using-typescript-with-immutable-js-v3-and-earlier">
       Using TypeScript with Immutable.js v3 and earlier:
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-case-for-immutability">
   The case for Immutability
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#javascript-first-api">
   JavaScript-first API
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#convert-from-raw-javascript-objects-and-arrays">
     Convert from raw JavaScript objects and arrays.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#converts-back-to-raw-javascript-objects">
     Converts back to raw JavaScript objects.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#embraces-es2015">
     Embraces ES2015
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#nested-structures">
   Nested Structures
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#equality-treats-collections-as-values">
   Equality treats Collections as Values
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#performance-tradeoffs">
     Performance tradeoffs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#return-self-on-no-op-optimization">
     Return self on no-op optimization
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#batching-mutations">
   Batching Mutations
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lazy-seq">
   Lazy Seq
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#comparison-of-filter-groupby-and-partition">
   Comparison of filter(), groupBy(), and partition()
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#additional-tools-and-resources">
   Additional Tools and Resources
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contributing">
   Contributing
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#changelog">
     Changelog
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#license">
     License
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#thanks">
     Thanks
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="immutable-collections-for-javascript">
<h1>Immutable collections for JavaScript<a class="headerlink" href="#immutable-collections-for-javascript" title="Permalink to this headline">#</a></h1>
<p><a class="reference external" href="https://github.com/immutable-js/immutable-js/actions/workflows/ci.yml?query=branch%3Amain"><img alt="Build Status" src="https://github.com/immutable-js/immutable-js/actions/workflows/ci.yml/badge.svg?branch=main" /></a> <a class="reference external" href="https://immutable-js.slack.com">Chat on slack</a></p>
<p><a class="reference external" href="https://immutable-js.com">Read the docs</a> and eat your vegetables.</p>
<p>Docs are automatically generated from <a class="reference external" href="https://github.com/immutable-js/immutable-js/blob/main/README.md">README.md</a> and <a class="reference external" href="https://github.com/immutable-js/immutable-js/blob/main/type-definitions/immutable.d.ts">immutable.d.ts</a>.
Please contribute! Also, don’t miss the <a class="reference external" href="https://github.com/immutable-js/immutable-js/wiki">wiki</a> which contains articles on
additional specific topics. Can’t find something? Open an <a class="reference external" href="https://github.com/immutable-js/immutable-js/issues">issue</a>.</p>
<p><strong>Table of contents:</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="#introduction">Introduction</a></p></li>
<li><p><a class="reference external" href="#getting-started">Getting started</a></p></li>
<li><p><a class="reference external" href="#the-case-for-immutability">The case for Immutability</a></p></li>
<li><p><a class="reference external" href="#javascript-first-api">JavaScript-first API</a></p></li>
<li><p><a class="reference external" href="#nested-structures">Nested Structures</a></p></li>
<li><p><a class="reference external" href="#equality-treats-collections-as-values">Equality treats Collections as Values</a></p></li>
<li><p><a class="reference external" href="#batching-mutations">Batching Mutations</a></p></li>
<li><p><a class="reference external" href="#lazy-seq">Lazy Seq</a></p></li>
<li><p><a class="reference external" href="#additional-tools-and-resources">Additional Tools and Resources</a></p></li>
<li><p><a class="reference external" href="#contributing">Contributing</a></p></li>
</ul>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">#</a></h2>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Immutable_object">Immutable</a> data cannot be changed once created, leading to much simpler
application development, no defensive copying, and enabling advanced memoization
and change detection techniques with simple logic. <a class="reference external" href="https://en.wikipedia.org/wiki/Persistent_data_structure">Persistent</a> data presents
a mutative API which does not update the data in-place, but instead always
yields new updated data.</p>
<p>Immutable.js provides many Persistent Immutable data structures including:
<code class="docutils literal notranslate"><span class="pre">List</span></code>, <code class="docutils literal notranslate"><span class="pre">Stack</span></code>, <code class="docutils literal notranslate"><span class="pre">Map</span></code>, <code class="docutils literal notranslate"><span class="pre">OrderedMap</span></code>, <code class="docutils literal notranslate"><span class="pre">Set</span></code>, <code class="docutils literal notranslate"><span class="pre">OrderedSet</span></code> and <code class="docutils literal notranslate"><span class="pre">Record</span></code>.</p>
<p>These data structures are highly efficient on modern JavaScript VMs by using
structural sharing via <a class="reference external" href="https://en.wikipedia.org/wiki/Hash_array_mapped_trie">hash maps tries</a> and <a class="reference external" href="https://hypirion.com/musings/understanding-persistent-vector-pt-1">vector tries</a> as popularized
by Clojure and Scala, minimizing the need to copy or cache data.</p>
<p>Immutable.js also provides a lazy <code class="docutils literal notranslate"><span class="pre">Seq</span></code>, allowing efficient
chaining of collection methods like <code class="docutils literal notranslate"><span class="pre">map</span></code> and <code class="docutils literal notranslate"><span class="pre">filter</span></code> without creating
intermediate representations. Create some <code class="docutils literal notranslate"><span class="pre">Seq</span></code> with <code class="docutils literal notranslate"><span class="pre">Range</span></code> and <code class="docutils literal notranslate"><span class="pre">Repeat</span></code>.</p>
<p>Want to hear more? Watch the presentation about Immutable.js:</p>
<p><a class="reference external" href="https://youtu.be/I7IdS-PbEgI"><img alt="Immutable Data and React" src="reveal/node_modules/immutable/website/public/Immutable-Data-and-React-YouTube.png" /></a></p>
</section>
<section id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">#</a></h2>
<p>Install <code class="docutils literal notranslate"><span class="pre">immutable</span></code> using npm.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># using npm</span>
npm<span class="w"> </span>install<span class="w"> </span>immutable

<span class="c1"># using Yarn</span>
yarn<span class="w"> </span>add<span class="w"> </span>immutable

<span class="c1"># using pnpm</span>
pnpm<span class="w"> </span>add<span class="w"> </span>immutable

<span class="c1"># using Bun</span>
bun<span class="w"> </span>add<span class="w"> </span>immutable
</pre></div>
</div>
<p>Then require it into any module.</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">Map</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">map1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">});</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">map2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">map1</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">50</span><span class="p">);</span>
<span class="nx">map1</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39; vs. &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">map2</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 2 vs. 50</span>
</pre></div>
</div>
<section id="browser">
<h3>Browser<a class="headerlink" href="#browser" title="Permalink to this headline">#</a></h3>
<p>Immutable.js has no dependencies, which makes it predictable to include in a Browser.</p>
<p>It’s highly recommended to use a module bundler like <a class="reference external" href="https://webpack.github.io/">webpack</a>,
<a class="reference external" href="https://rollupjs.org/">rollup</a>, or
<a class="reference external" href="https://browserify.org/">browserify</a>. The <code class="docutils literal notranslate"><span class="pre">immutable</span></code> npm module works
without any additional consideration. All examples throughout the documentation
will assume use of this kind of tool.</p>
<p>Alternatively, Immutable.js may be directly included as a script tag. Download
or link to a CDN such as <a class="reference external" href="https://cdnjs.com/libraries/immutable">CDNJS</a>
or <a class="reference external" href="https://www.jsdelivr.com/package/npm/immutable">jsDelivr</a>.</p>
<p>Use a script tag to directly add <code class="docutils literal notranslate"><span class="pre">Immutable</span></code> to the global scope:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;immutable.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">map1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Immutable</span><span class="p">.</span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">});</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">map2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">map1</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">50</span><span class="p">);</span>
<span class="w">  </span><span class="nx">map1</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 2</span>
<span class="w">  </span><span class="nx">map2</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 50</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Or use an AMD-style loader (such as <a class="reference external" href="https://requirejs.org/">RequireJS</a>):</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">require</span><span class="p">([</span><span class="s1">&#39;./immutable.min.js&#39;</span><span class="p">],</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">Immutable</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">map1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Immutable</span><span class="p">.</span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">});</span>
<span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">map2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">map1</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">50</span><span class="p">);</span>
<span class="w">  </span><span class="nx">map1</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 2</span>
<span class="w">  </span><span class="nx">map2</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 50</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
<section id="flow-typescript">
<h3>Flow &amp; TypeScript<a class="headerlink" href="#flow-typescript" title="Permalink to this headline">#</a></h3>
<p>Use these Immutable collections and sequences as you would use native
collections in your <a class="reference external" href="https://flowtype.org/">Flowtype</a> or <a class="reference external" href="https://typescriptlang.org">TypeScript</a> programs while still taking
advantage of type generics, error detection, and auto-complete in your IDE.</p>
<p>Installing <code class="docutils literal notranslate"><span class="pre">immutable</span></code> via npm brings with it type definitions for Flow (v0.55.0 or higher)
and TypeScript (v2.1.0 or higher), so you shouldn’t need to do anything at all!</p>
<section id="using-typescript-with-immutable-js-v4">
<h4>Using TypeScript with Immutable.js v4<a class="headerlink" href="#using-typescript-with-immutable-js-v4" title="Permalink to this headline">#</a></h4>
<p>Immutable.js type definitions embrace ES2015. While Immutable.js itself supports
legacy browsers and environments, its type definitions require TypeScript’s 2015
lib. Include either <code class="docutils literal notranslate"><span class="pre">&quot;target&quot;:</span> <span class="pre">&quot;es2015&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;lib&quot;:</span> <span class="pre">&quot;es2015&quot;</span></code> in your
<code class="docutils literal notranslate"><span class="pre">tsconfig.json</span></code>, or provide <code class="docutils literal notranslate"><span class="pre">--target</span> <span class="pre">es2015</span></code> or <code class="docutils literal notranslate"><span class="pre">--lib</span> <span class="pre">es2015</span></code> to the
<code class="docutils literal notranslate"><span class="pre">tsc</span></code> command.</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">Map</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">map1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">});</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">map2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">map1</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">50</span><span class="p">);</span>
<span class="nx">map1</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39; vs. &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">map2</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 2 vs. 50</span>
</pre></div>
</div>
</section>
<section id="using-typescript-with-immutable-js-v3-and-earlier">
<h4>Using TypeScript with Immutable.js v3 and earlier:<a class="headerlink" href="#using-typescript-with-immutable-js-v3-and-earlier" title="Permalink to this headline">#</a></h4>
<p>Previous versions of Immutable.js include a reference file which you can include
via relative path to the type definitions at the top of your file.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">///&lt;reference path=&#39;./node_modules/immutable/dist/immutable.d.ts&#39;/&gt;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">Immutable</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;immutable&#39;</span><span class="p">;</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">map1</span><span class="o">:</span><span class="w"> </span><span class="nx">Immutable</span><span class="p">.</span><span class="nb">Map</span><span class="o">&lt;</span><span class="nx">string</span><span class="p">,</span><span class="w"> </span><span class="nx">number</span><span class="o">&gt;</span><span class="p">;</span>
<span class="nx">map1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Immutable</span><span class="p">.</span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">});</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">map2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">map1</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">50</span><span class="p">);</span>
<span class="nx">map1</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 2</span>
<span class="nx">map2</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 50</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="the-case-for-immutability">
<h2>The case for Immutability<a class="headerlink" href="#the-case-for-immutability" title="Permalink to this headline">#</a></h2>
<p>Much of what makes application development difficult is tracking mutation and
maintaining state. Developing with immutable data encourages you to think
differently about how data flows through your application.</p>
<p>Subscribing to data events throughout your application creates a huge overhead of
book-keeping which can hurt performance, sometimes dramatically, and creates
opportunities for areas of your application to get out of sync with each other
due to easy to make programmer error. Since immutable data never changes,
subscribing to changes throughout the model is a dead-end and new data can only
ever be passed from above.</p>
<p>This model of data flow aligns well with the architecture of <a class="reference external" href="https://reactjs.org/">React</a>
and especially well with an application designed using the ideas of <a class="reference external" href="https://facebook.github.io/flux/docs/in-depth-overview/">Flux</a>.</p>
<p>When data is passed from above rather than being subscribed to, and you’re only
interested in doing work when something has changed, you can use equality.</p>
<p>Immutable collections should be treated as <em>values</em> rather than <em>objects</em>. While
objects represent some thing which could change over time, a value represents
the state of that thing at a particular instance of time. This principle is most
important to understanding the appropriate use of immutable data. In order to
treat Immutable.js collections as values, it’s important to use the
<code class="docutils literal notranslate"><span class="pre">Immutable.is()</span></code> function or <code class="docutils literal notranslate"><span class="pre">.equals()</span></code> method to determine <em>value equality</em>
instead of the <code class="docutils literal notranslate"><span class="pre">===</span></code> operator which determines object <em>reference identity</em>.</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">Map</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">map1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">});</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">map2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">});</span>
<span class="nx">map1</span><span class="p">.</span><span class="nx">equals</span><span class="p">(</span><span class="nx">map2</span><span class="p">);</span><span class="w"> </span><span class="c1">// true</span>
<span class="nx">map1</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">map2</span><span class="p">;</span><span class="w"> </span><span class="c1">// false</span>
</pre></div>
</div>
<p>Note: As a performance optimization Immutable.js attempts to return the existing
collection when an operation would result in an identical collection, allowing
for using <code class="docutils literal notranslate"><span class="pre">===</span></code> reference equality to determine if something definitely has not
changed. This can be extremely useful when used within a memoization function
which would prefer to re-run the function if a deeper equality check could
potentially be more costly. The <code class="docutils literal notranslate"><span class="pre">===</span></code> equality check is also used internally by
<code class="docutils literal notranslate"><span class="pre">Immutable.is</span></code> and <code class="docutils literal notranslate"><span class="pre">.equals()</span></code> as a performance optimization.</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">Map</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">map1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">});</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">map2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">map1</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span><span class="w"> </span><span class="c1">// Set to same value</span>
<span class="nx">map1</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">map2</span><span class="p">;</span><span class="w"> </span><span class="c1">// true</span>
</pre></div>
</div>
<p>If an object is immutable, it can be “copied” simply by making another reference
to it instead of copying the entire object. Because a reference is much smaller
than the object itself, this results in memory savings and a potential boost in
execution speed for programs which rely on copies (such as an undo-stack).</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">Map</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">});</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">mapCopy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">map</span><span class="p">;</span><span class="w"> </span><span class="c1">// Look, &quot;copies&quot; are free!</span>
</pre></div>
</div>
</section>
<section id="javascript-first-api">
<h2>JavaScript-first API<a class="headerlink" href="#javascript-first-api" title="Permalink to this headline">#</a></h2>
<p>While Immutable.js is inspired by Clojure, Scala, Haskell and other functional
programming environments, it’s designed to bring these powerful concepts to
JavaScript, and therefore has an Object-Oriented API that closely mirrors that
of <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/New_in_JavaScript/ECMAScript_6_support_in_Mozilla">ES2015</a> <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>, <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a>, and <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set">Set</a>.</p>
<p>The difference for the immutable collections is that methods which would mutate
the collection, like <code class="docutils literal notranslate"><span class="pre">push</span></code>, <code class="docutils literal notranslate"><span class="pre">set</span></code>, <code class="docutils literal notranslate"><span class="pre">unshift</span></code> or <code class="docutils literal notranslate"><span class="pre">splice</span></code>, instead return a new
immutable collection. Methods which return new arrays, like <code class="docutils literal notranslate"><span class="pre">slice</span></code> or <code class="docutils literal notranslate"><span class="pre">concat</span></code>,
instead return new immutable collections.</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">List</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">list1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">List</span><span class="p">([</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">]);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">list2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">list1</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">list3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">list2</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="mf">0</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">list4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">list1</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">list2</span><span class="p">,</span><span class="w"> </span><span class="nx">list3</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">list1</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">list2</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">list3</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">list4</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span><span class="w"> </span><span class="mf">13</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">list4</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="mf">0</span><span class="p">),</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
</pre></div>
</div>
<p>Almost all of the methods on <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a> will be found in similar form on
<code class="docutils literal notranslate"><span class="pre">Immutable.List</span></code>, those of <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a> found on <code class="docutils literal notranslate"><span class="pre">Immutable.Map</span></code>, and those of <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set">Set</a>
found on <code class="docutils literal notranslate"><span class="pre">Immutable.Set</span></code>, including collection operations like <code class="docutils literal notranslate"><span class="pre">forEach()</span></code>
and <code class="docutils literal notranslate"><span class="pre">map()</span></code>.</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">Map</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="nx">d</span><span class="o">:</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="p">});</span>
<span class="nx">alpha</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">v</span><span class="p">,</span><span class="w"> </span><span class="nx">k</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">k</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()).</span><span class="nx">join</span><span class="p">();</span>
<span class="c1">// &#39;A,B,C,D&#39;</span>
</pre></div>
</div>
<section id="convert-from-raw-javascript-objects-and-arrays">
<h3>Convert from raw JavaScript objects and arrays.<a class="headerlink" href="#convert-from-raw-javascript-objects-and-arrays" title="Permalink to this headline">#</a></h3>
<p>Designed to inter-operate with your existing JavaScript, Immutable.js
accepts plain JavaScript Arrays and Objects anywhere a method expects a
<code class="docutils literal notranslate"><span class="pre">Collection</span></code>.</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">Map</span><span class="p">,</span><span class="w"> </span><span class="nx">List</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">map1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="nx">d</span><span class="o">:</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="p">});</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">map2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">10</span><span class="p">,</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">20</span><span class="p">,</span><span class="w"> </span><span class="nx">t</span><span class="o">:</span><span class="w"> </span><span class="mf">30</span><span class="w"> </span><span class="p">});</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">d</span><span class="o">:</span><span class="w"> </span><span class="mf">100</span><span class="p">,</span><span class="w"> </span><span class="nx">o</span><span class="o">:</span><span class="w"> </span><span class="mf">200</span><span class="p">,</span><span class="w"> </span><span class="nx">g</span><span class="o">:</span><span class="w"> </span><span class="mf">300</span><span class="w"> </span><span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">map3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">map1</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="nx">map2</span><span class="p">,</span><span class="w"> </span><span class="nx">obj</span><span class="p">);</span>
<span class="c1">// Map { a: 20, b: 2, c: 10, d: 100, t: 30, o: 200, g: 300 }</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">list1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">List</span><span class="p">([</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">]);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">list2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">List</span><span class="p">([</span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">]);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">,</span><span class="w"> </span><span class="mf">9</span><span class="p">];</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">list3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">list1</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">list2</span><span class="p">,</span><span class="w"> </span><span class="nx">array</span><span class="p">);</span>
<span class="c1">// List [ 1, 2, 3, 4, 5, 6, 7, 8, 9 ]</span>
</pre></div>
</div>
<p>This is possible because Immutable.js can treat any JavaScript Array or Object
as a Collection. You can take advantage of this in order to get sophisticated
collection methods on JavaScript Objects, which otherwise have a very sparse
native API. Because Seq evaluates lazily and does not cache intermediate
results, these operations can be extremely efficient.</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Seq</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">myObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">};</span>
<span class="nx">Seq</span><span class="p">(</span><span class="nx">myObject</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">toObject</span><span class="p">();</span>
<span class="c1">// { a: 1, b: 4, c: 9 }</span>
</pre></div>
</div>
<p>Keep in mind, when using JS objects to construct Immutable Maps, that
JavaScript Object properties are always strings, even if written in a quote-less
shorthand, while Immutable Maps accept keys of any type.</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">fromJS</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mf">1</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;one&#39;</span><span class="w"> </span><span class="p">};</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">obj</span><span class="p">));</span><span class="w"> </span><span class="c1">// [ &quot;1&quot; ]</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">],</span><span class="w"> </span><span class="nx">obj</span><span class="p">[</span><span class="mf">1</span><span class="p">]);</span><span class="w"> </span><span class="c1">// &quot;one&quot;, &quot;one&quot;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fromJS</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">map</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">),</span><span class="w"> </span><span class="nx">map</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="mf">1</span><span class="p">));</span><span class="w"> </span><span class="c1">// &quot;one&quot;, undefined</span>
</pre></div>
</div>
<p>Property access for JavaScript Objects first converts the key to a string, but
since Immutable Map keys can be of any type the argument to <code class="docutils literal notranslate"><span class="pre">get()</span></code> is
not altered.</p>
</section>
<section id="converts-back-to-raw-javascript-objects">
<h3>Converts back to raw JavaScript objects.<a class="headerlink" href="#converts-back-to-raw-javascript-objects" title="Permalink to this headline">#</a></h3>
<p>All Immutable.js Collections can be converted to plain JavaScript Arrays and
Objects shallowly with <code class="docutils literal notranslate"><span class="pre">toArray()</span></code> and <code class="docutils literal notranslate"><span class="pre">toObject()</span></code> or deeply with <code class="docutils literal notranslate"><span class="pre">toJS()</span></code>.
All Immutable Collections also implement <code class="docutils literal notranslate"><span class="pre">toJSON()</span></code> allowing them to be passed
to <code class="docutils literal notranslate"><span class="pre">JSON.stringify</span></code> directly. They also respect the custom <code class="docutils literal notranslate"><span class="pre">toJSON()</span></code> methods of
nested objects.</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">Map</span><span class="p">,</span><span class="w"> </span><span class="nx">List</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">deep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="nx">List</span><span class="p">([</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">])</span><span class="w"> </span><span class="p">});</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">deep</span><span class="p">.</span><span class="nx">toObject</span><span class="p">());</span><span class="w"> </span><span class="c1">// { a: 1, b: 2, c: List [ 3, 4, 5 ] }</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">deep</span><span class="p">.</span><span class="nx">toArray</span><span class="p">());</span><span class="w"> </span><span class="c1">// [ 1, 2, List [ 3, 4, 5 ] ]</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">deep</span><span class="p">.</span><span class="nx">toJS</span><span class="p">());</span><span class="w"> </span><span class="c1">// { a: 1, b: 2, c: [ 3, 4, 5 ] }</span>
<span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">deep</span><span class="p">);</span><span class="w"> </span><span class="c1">// &#39;{&quot;a&quot;:1,&quot;b&quot;:2,&quot;c&quot;:[3,4,5]}&#39;</span>
</pre></div>
</div>
</section>
<section id="embraces-es2015">
<h3>Embraces ES2015<a class="headerlink" href="#embraces-es2015" title="Permalink to this headline">#</a></h3>
<p>Immutable.js supports all JavaScript environments, including legacy
browsers (even IE11). However it also takes advantage of features added to
JavaScript in <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/New_in_JavaScript/ECMAScript_6_support_in_Mozilla">ES2015</a>, the latest standard version of JavaScript, including
<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/The_Iterator_protocol">Iterators</a>, <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">Arrow Functions</a>, <a class="reference external" href="https://wiki.ecmascript.org/doku.php?id=strawman:maximally_minimal_classes">Classes</a>, and <a class="reference external" href="https://www.2ality.com/2014/09/es6-modules-final.html">Modules</a>. It’s inspired
by the native <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a> and <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set">Set</a> collections added to ES2015.</p>
<p>All examples in the Documentation are presented in ES2015. To run in all
browsers, they need to be translated to ES5.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// ES2015</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">mapped</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">foo</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">x</span><span class="p">);</span>
<span class="c1">// ES5</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">mapped</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">foo</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">x</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>All Immutable.js collections are <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/The_Iterator_protocol">Iterable</a>, which allows them to be
used anywhere an Iterable is expected, such as when spreading into an Array.</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">List</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">aList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">List</span><span class="p">([</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">]);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">anArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">aList</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">];</span><span class="w"> </span><span class="c1">// [ 0, 1, 2, 3, 4, 5 ]</span>
</pre></div>
</div>
<p>Note: A Collection is always iterated in the same order, however that order may
not always be well defined, as is the case for the <code class="docutils literal notranslate"><span class="pre">Map</span></code> and <code class="docutils literal notranslate"><span class="pre">Set</span></code>.</p>
</section>
</section>
<section id="nested-structures">
<h2>Nested Structures<a class="headerlink" href="#nested-structures" title="Permalink to this headline">#</a></h2>
<p>The collections in Immutable.js are intended to be nested, allowing for deep
trees of data, similar to JSON.</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">fromJS</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">nested</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fromJS</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">});</span>
<span class="c1">// Map { a: Map { b: Map { c: List [ 3, 4, 5 ] } } }</span>
</pre></div>
</div>
<p>A few power-tools allow for reading and operating on nested data. The
most useful are <code class="docutils literal notranslate"><span class="pre">mergeDeep</span></code>, <code class="docutils literal notranslate"><span class="pre">getIn</span></code>, <code class="docutils literal notranslate"><span class="pre">setIn</span></code>, and <code class="docutils literal notranslate"><span class="pre">updateIn</span></code>, found on <code class="docutils literal notranslate"><span class="pre">List</span></code>,
<code class="docutils literal notranslate"><span class="pre">Map</span></code> and <code class="docutils literal notranslate"><span class="pre">OrderedMap</span></code>.</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">fromJS</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">nested</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fromJS</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">});</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">nested2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nested</span><span class="p">.</span><span class="nx">mergeDeep</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">d</span><span class="o">:</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">});</span>
<span class="c1">// Map { a: Map { b: Map { c: List [ 3, 4, 5 ], d: 6 } } }</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">nested2</span><span class="p">.</span><span class="nx">getIn</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;d&#39;</span><span class="p">]));</span><span class="w"> </span><span class="c1">// 6</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">nested3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nested2</span><span class="p">.</span><span class="nx">updateIn</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;d&#39;</span><span class="p">],</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">nested3</span><span class="p">);</span>
<span class="c1">// Map { a: Map { b: Map { c: List [ 3, 4, 5 ], d: 7 } } }</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">nested4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">nested3</span><span class="p">.</span><span class="nx">updateIn</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;c&#39;</span><span class="p">],</span><span class="w"> </span><span class="nx">list</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">list</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="mf">6</span><span class="p">));</span>
<span class="c1">// Map { a: Map { b: Map { c: List [ 3, 4, 5, 6 ], d: 7 } } }</span>
</pre></div>
</div>
</section>
<section id="equality-treats-collections-as-values">
<h2>Equality treats Collections as Values<a class="headerlink" href="#equality-treats-collections-as-values" title="Permalink to this headline">#</a></h2>
<p>Immutable.js collections are treated as pure data <em>values</em>. Two immutable
collections are considered <em>value equal</em> (via <code class="docutils literal notranslate"><span class="pre">.equals()</span></code> or <code class="docutils literal notranslate"><span class="pre">is()</span></code>) if they
represent the same collection of values. This differs from JavaScript’s typical
<em>reference equal</em> (via <code class="docutils literal notranslate"><span class="pre">===</span></code> or <code class="docutils literal notranslate"><span class="pre">==</span></code>) for Objects and Arrays which only
determines if two variables represent references to the same object instance.</p>
<p>Consider the example below where two identical <code class="docutils literal notranslate"><span class="pre">Map</span></code> instances are not
<em>reference equal</em> but are <em>value equal</em>.</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// First consider:</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">obj1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">obj2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">};</span>
<span class="nx">obj1</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">obj2</span><span class="p">;</span><span class="w"> </span><span class="c1">// two different instances are always not equal with ===</span>

<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">Map</span><span class="p">,</span><span class="w"> </span><span class="nx">is</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">map1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">});</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">map2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">});</span>
<span class="nx">map1</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">map2</span><span class="p">;</span><span class="w"> </span><span class="c1">// two different instances are not reference-equal</span>
<span class="nx">map1</span><span class="p">.</span><span class="nx">equals</span><span class="p">(</span><span class="nx">map2</span><span class="p">);</span><span class="w"> </span><span class="c1">// but are value-equal if they have the same values</span>
<span class="nx">is</span><span class="p">(</span><span class="nx">map1</span><span class="p">,</span><span class="w"> </span><span class="nx">map2</span><span class="p">);</span><span class="w"> </span><span class="c1">// alternatively can use the is() function</span>
</pre></div>
</div>
<p>Value equality allows Immutable.js collections to be used as keys in Maps or
values in Sets, and retrieved with different but equivalent collections:</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">Map</span><span class="p">,</span><span class="w"> </span><span class="nb">Set</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">map1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">});</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">map2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">});</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">set</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Set</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">map1</span><span class="p">);</span>
<span class="nx">set</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">map2</span><span class="p">);</span><span class="w"> </span><span class="c1">// true because these are value-equal</span>
</pre></div>
</div>
<p>Note: <code class="docutils literal notranslate"><span class="pre">is()</span></code> uses the same measure of equality as <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is">Object.is</a> for scalar
strings and numbers, but uses value equality for Immutable collections,
determining if both are immutable and all keys and values are equal
using the same measure of equality.</p>
<section id="performance-tradeoffs">
<h3>Performance tradeoffs<a class="headerlink" href="#performance-tradeoffs" title="Permalink to this headline">#</a></h3>
<p>While value equality is useful in many circumstances, it has different
performance characteristics than reference equality. Understanding these
tradeoffs may help you decide which to use in each case, especially when used
to memoize some operation.</p>
<p>When comparing two collections, value equality may require considering every
item in each collection, on an <code class="docutils literal notranslate"><span class="pre">O(N)</span></code> time complexity. For large collections of
values, this could become a costly operation. Though if the two are not equal
and hardly similar, the inequality is determined very quickly. In contrast, when
comparing two collections with reference equality, only the initial references
to memory need to be compared which is not based on the size of the collections,
which has an <code class="docutils literal notranslate"><span class="pre">O(1)</span></code> time complexity. Checking reference equality is always very
fast, however just because two collections are not reference-equal does not rule
out the possibility that they may be value-equal.</p>
</section>
<section id="return-self-on-no-op-optimization">
<h3>Return self on no-op optimization<a class="headerlink" href="#return-self-on-no-op-optimization" title="Permalink to this headline">#</a></h3>
<p>When possible, Immutable.js avoids creating new objects for updates where no
change in <em>value</em> occurred, to allow for efficient <em>reference equality</em> checking
to quickly determine if no change occurred.</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">Map</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">originalMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">});</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">updatedMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">originalMap</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>
<span class="nx">updatedMap</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">originalMap</span><span class="p">;</span><span class="w"> </span><span class="c1">// No-op .set() returned the original reference.</span>
</pre></div>
</div>
<p>However updates which do result in a change will return a new reference. Each
of these operations occur independently, so two similar updates will not return
the same reference:</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">Map</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">originalMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">});</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">updatedMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">originalMap</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
<span class="c1">// New instance, leaving the original immutable.</span>
<span class="nx">updatedMap</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">originalMap</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">anotherUpdatedMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">originalMap</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">1000</span><span class="p">);</span>
<span class="c1">// Despite both the results of the same operation, each created a new reference.</span>
<span class="nx">anotherUpdatedMap</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="nx">updatedMap</span><span class="p">;</span>
<span class="c1">// However the two are value equal.</span>
<span class="nx">anotherUpdatedMap</span><span class="p">.</span><span class="nx">equals</span><span class="p">(</span><span class="nx">updatedMap</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="batching-mutations">
<h2>Batching Mutations<a class="headerlink" href="#batching-mutations" title="Permalink to this headline">#</a></h2>
<blockquote>
<div><p>If a tree falls in the woods, does it make a sound?</p>
<p>If a pure function mutates some local data in order to produce an immutable
return value, is that ok?</p>
<p>— Rich Hickey, Clojure</p>
</div></blockquote>
<p>Applying a mutation to create a new immutable object results in some overhead,
which can add up to a minor performance penalty. If you need to apply a series
of mutations locally before returning, Immutable.js gives you the ability to
create a temporary mutable (transient) copy of a collection and apply a batch of
mutations in a performant manner by using <code class="docutils literal notranslate"><span class="pre">withMutations</span></code>. In fact, this is
exactly how Immutable.js applies complex mutations itself.</p>
<p>As an example, building <code class="docutils literal notranslate"><span class="pre">list2</span></code> results in the creation of 1, not 3, new
immutable Lists.</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">List</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">list1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">List</span><span class="p">([</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">]);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">list2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">list1</span><span class="p">.</span><span class="nx">withMutations</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">list</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">list</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="mf">4</span><span class="p">).</span><span class="nx">push</span><span class="p">(</span><span class="mf">5</span><span class="p">).</span><span class="nx">push</span><span class="p">(</span><span class="mf">6</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">list1</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">list2</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">);</span>
</pre></div>
</div>
<p>Note: Immutable.js also provides <code class="docutils literal notranslate"><span class="pre">asMutable</span></code> and <code class="docutils literal notranslate"><span class="pre">asImmutable</span></code>, but only
encourages their use when <code class="docutils literal notranslate"><span class="pre">withMutations</span></code> will not suffice. Use caution to not
return a mutable copy, which could result in undesired behavior.</p>
<p><em>Important!</em>: Only a select few methods can be used in <code class="docutils literal notranslate"><span class="pre">withMutations</span></code> including
<code class="docutils literal notranslate"><span class="pre">set</span></code>, <code class="docutils literal notranslate"><span class="pre">push</span></code> and <code class="docutils literal notranslate"><span class="pre">pop</span></code>. These methods can be applied directly against a
persistent data-structure where other methods like <code class="docutils literal notranslate"><span class="pre">map</span></code>, <code class="docutils literal notranslate"><span class="pre">filter</span></code>, <code class="docutils literal notranslate"><span class="pre">sort</span></code>,
and <code class="docutils literal notranslate"><span class="pre">splice</span></code> will always return new immutable data-structures and never mutate
a mutable collection.</p>
</section>
<section id="lazy-seq">
<h2>Lazy Seq<a class="headerlink" href="#lazy-seq" title="Permalink to this headline">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Seq</span></code> describes a lazy operation, allowing them to efficiently chain
use of all the higher-order collection methods (such as <code class="docutils literal notranslate"><span class="pre">map</span></code> and <code class="docutils literal notranslate"><span class="pre">filter</span></code>)
by not creating intermediate collections.</p>
<p><strong>Seq is immutable</strong> — Once a Seq is created, it cannot be
changed, appended to, rearranged or otherwise modified. Instead, any mutative
method called on a <code class="docutils literal notranslate"><span class="pre">Seq</span></code> will return a new <code class="docutils literal notranslate"><span class="pre">Seq</span></code>.</p>
<p><strong>Seq is lazy</strong> — <code class="docutils literal notranslate"><span class="pre">Seq</span></code> does as little work as necessary to respond to any
method call. Values are often created during iteration, including implicit
iteration when reducing or converting to a concrete data structure such as
a <code class="docutils literal notranslate"><span class="pre">List</span></code> or JavaScript <code class="docutils literal notranslate"><span class="pre">Array</span></code>.</p>
<p>For example, the following performs no work, because the resulting
<code class="docutils literal notranslate"><span class="pre">Seq</span></code>’s values are never iterated:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Seq</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">oddSquares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Seq</span><span class="p">([</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">,</span><span class="w"> </span><span class="mf">6</span><span class="p">,</span><span class="w"> </span><span class="mf">7</span><span class="p">,</span><span class="w"> </span><span class="mf">8</span><span class="p">])</span>
<span class="w">  </span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">x</span><span class="p">);</span>
</pre></div>
</div>
<p>Once the <code class="docutils literal notranslate"><span class="pre">Seq</span></code> is used, it performs only the work necessary. In this
example, no intermediate arrays are ever created, filter is called three
times, and map is only called once:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">oddSquares</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// 9</span>
</pre></div>
</div>
<p>Any collection can be converted to a lazy Seq with <code class="docutils literal notranslate"><span class="pre">Seq()</span></code>.</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">Map</span><span class="p">,</span><span class="w"> </span><span class="nx">Seq</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Map</span><span class="p">({</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="o">:</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="p">});</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">lazySeq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Seq</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Seq</span></code> allows for the efficient chaining of operations, allowing for the
expression of logic that can otherwise be very tedious:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">lazySeq</span>
<span class="w">  </span><span class="p">.</span><span class="nx">flip</span><span class="p">()</span>
<span class="w">  </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">key</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">key</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">())</span>
<span class="w">  </span><span class="p">.</span><span class="nx">flip</span><span class="p">();</span>
<span class="c1">// Seq { A: 1, B: 2, C: 3 }</span>
</pre></div>
</div>
<p>As well as expressing logic that would otherwise seem memory or time
limited, for example <code class="docutils literal notranslate"><span class="pre">Range</span></code> is a special kind of Lazy sequence.</p>
<!-- runkit:activate -->
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Range</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;immutable&#39;</span><span class="p">);</span>
<span class="nx">Range</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="kc">Infinity</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">skip</span><span class="p">(</span><span class="mf">1000</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">take</span><span class="p">(</span><span class="mf">2</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">n</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>
<span class="c1">// 1006008</span>
</pre></div>
</div>
</section>
<section id="comparison-of-filter-groupby-and-partition">
<h2>Comparison of filter(), groupBy(), and partition()<a class="headerlink" href="#comparison-of-filter-groupby-and-partition" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">filter()</span></code>, <code class="docutils literal notranslate"><span class="pre">groupBy()</span></code>, and <code class="docutils literal notranslate"><span class="pre">partition()</span></code> methods are similar in that they
all divide a collection into parts based on applying a function to each element.
All three call the predicate or grouping function once for each item in the
input collection.  All three return zero or more collections of the same type as
their input.  The returned collections are always distinct from the input
(according to <code class="docutils literal notranslate"><span class="pre">===</span></code>), even if the contents are identical.</p>
<p>Of these methods, <code class="docutils literal notranslate"><span class="pre">filter()</span></code> is the only one that is lazy and the only one which
discards items from the input collection. It is the simplest to use, and the
fact that it returns exactly one collection makes it easy to combine with other
methods to form a pipeline of operations.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">partition()</span></code> method is similar to an eager version of <code class="docutils literal notranslate"><span class="pre">filter()</span></code>, but it
returns two collections; the first contains the items that would have been
discarded by <code class="docutils literal notranslate"><span class="pre">filter()</span></code>, and the second contains the items that would have been
kept.  It always returns an array of exactly two collections, which can make it
easier to use than <code class="docutils literal notranslate"><span class="pre">groupBy()</span></code>.  Compared to making two separate calls to
<code class="docutils literal notranslate"><span class="pre">filter()</span></code>, <code class="docutils literal notranslate"><span class="pre">partition()</span></code> makes half as many calls it the predicate passed to
it.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">groupBy()</span></code> method is a more generalized version of <code class="docutils literal notranslate"><span class="pre">partition()</span></code> that can
group by an arbitrary function rather than just a predicate.  It returns a map
with zero or more entries, where the keys are the values returned by the
grouping function, and the values are nonempty collections of the corresponding
arguments.  Although <code class="docutils literal notranslate"><span class="pre">groupBy()</span></code> is more powerful than <code class="docutils literal notranslate"><span class="pre">partition()</span></code>, it can be
harder to use because it is not always possible predict in advance how many
entries the returned map will have and what their keys will be.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Summary</p></th>
<th class="text-align:left head"><p><code class="docutils literal notranslate"><span class="pre">filter</span></code></p></th>
<th class="text-align:left head"><p><code class="docutils literal notranslate"><span class="pre">partition</span></code></p></th>
<th class="text-align:left head"><p><code class="docutils literal notranslate"><span class="pre">groupBy</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p>ease of use</p></td>
<td class="text-align:left"><p>easiest</p></td>
<td class="text-align:left"><p>moderate</p></td>
<td class="text-align:left"><p>hardest</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>generality</p></td>
<td class="text-align:left"><p>least</p></td>
<td class="text-align:left"><p>moderate</p></td>
<td class="text-align:left"><p>most</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>laziness</p></td>
<td class="text-align:left"><p>lazy</p></td>
<td class="text-align:left"><p>eager</p></td>
<td class="text-align:left"><p>eager</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p># of returned sub-collections</p></td>
<td class="text-align:left"><p>1</p></td>
<td class="text-align:left"><p>2</p></td>
<td class="text-align:left"><p>0 or more</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>sub-collections may be empty</p></td>
<td class="text-align:left"><p>yes</p></td>
<td class="text-align:left"><p>yes</p></td>
<td class="text-align:left"><p>no</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>can discard items</p></td>
<td class="text-align:left"><p>yes</p></td>
<td class="text-align:left"><p>no</p></td>
<td class="text-align:left"><p>no</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>wrapping container</p></td>
<td class="text-align:left"><p>none</p></td>
<td class="text-align:left"><p>array</p></td>
<td class="text-align:left"><p>Map/OrderedMap</p></td>
</tr>
</tbody>
</table>
</section>
<section id="additional-tools-and-resources">
<h2>Additional Tools and Resources<a class="headerlink" href="#additional-tools-and-resources" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/jameshopkins/atom-store/">Atom-store</a></p>
<ul>
<li><p>A Clojure-inspired atom implementation in Javascript with configurability
for external persistance.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/astorije/chai-immutable">Chai Immutable</a></p>
<ul>
<li><p>If you are using the <a class="reference external" href="https://chaijs.com/">Chai Assertion Library</a>, this
provides a set of assertions to use against Immutable.js collections.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/fantasyland/fantasy-land">Fantasy-land</a></p>
<ul>
<li><p>Specification for interoperability of common algebraic structures in JavaScript.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/pelotom/immutagen">Immutagen</a></p>
<ul>
<li><p>A library for simulating immutable generators in JavaScript.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/redbadger/immutable-cursor">Immutable-cursor</a></p>
<ul>
<li><p>Immutable cursors incorporating the Immutable.js interface over
Clojure-inspired atom.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/DrBoolean/immutable-ext">Immutable-ext</a></p>
<ul>
<li><p>Fantasyland extensions for immutablejs</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/madeinfree/immutable-js-tools">Immutable-js-tools</a></p>
<ul>
<li><p>Util tools for immutable.js</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/gajus/redux-immutable">Immutable-Redux</a></p>
<ul>
<li><p>redux-immutable is used to create an equivalent function of Redux
combineReducers that works with Immutable.js state.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/lukasbuenger/immutable-treeutils">Immutable-Treeutils</a></p>
<ul>
<li><p>Functional tree traversal helpers for ImmutableJS data structures.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/ericelliott/irecord">Irecord</a></p>
<ul>
<li><p>An immutable store that exposes an RxJS observable. Great for React.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/brianneisler/mudash">Mudash</a></p>
<ul>
<li><p>Lodash wrapper providing Immutable.JS support.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/HurricaneJames/react-immutable-proptypes">React-Immutable-PropTypes</a></p>
<ul>
<li><p>PropType validators that work with Immutable.js.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/indexiatech/redux-immutablejs">Redux-Immutablejs</a></p>
<ul>
<li><p>Redux Immutable facilities.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/yamalight/rxstate">Rxstate</a></p>
<ul>
<li><p>Simple opinionated state management library based on RxJS and Immutable.js.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/glenjamin/transit-immutable-js">Transit-Immutable-js</a></p>
<ul>
<li><p>Transit serialisation for Immutable.js.</p></li>
<li><p>See also: <a class="reference external" href="https://github.com/cognitect/transit-js">Transit-js</a></p></li>
</ul>
</li>
</ul>
<p>Have an additional tool designed to work with Immutable.js?
Submit a PR to add it to this list in alphabetical order.</p>
</section>
<section id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">#</a></h2>
<p>Use <a class="reference external" href="https://github.com/immutable-js/immutable-js/issues">Github issues</a> for requests.</p>
<p>We actively welcome pull requests, learn how to <a class="reference external" href="https://github.com/immutable-js/immutable-js/blob/main/.github/CONTRIBUTING.md">contribute</a>.</p>
<p>Immutable.js is maintained within the <a class="reference external" href="https://www.contributor-covenant.org/version/2/0/code_of_conduct/">Contributor Covenant’s Code of Conduct</a>.</p>
<section id="changelog">
<h3>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">#</a></h3>
<p>Changes are tracked as <a class="reference external" href="https://github.com/immutable-js/immutable-js/releases">Github releases</a>.</p>
</section>
<section id="license">
<h3>License<a class="headerlink" href="#license" title="Permalink to this headline">#</a></h3>
<p>Immutable.js is <span class="xref myst">MIT-licensed</span>.</p>
</section>
<section id="thanks">
<h3>Thanks<a class="headerlink" href="#thanks" title="Permalink to this headline">#</a></h3>
<p><a class="reference external" href="https://www.youtube.com/watch?v=K2NYwP90bNs">Phil Bagwell</a>, for his inspiration
and research in persistent data structures.</p>
<p><a class="reference external" href="https://github.com/hughfdjackson/">Hugh Jackson</a>, for providing the npm package
name. If you’re looking for his unsupported package, see <a class="reference external" href="https://github.com/hughfdjackson/immutable">this repository</a>.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./reveal/node_modules/immutable"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Mark S. Baldwin<br/>
  
      &copy; Copyright 2023.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>