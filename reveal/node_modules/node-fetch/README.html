
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>node-fetch &#8212; INF 133 Fall 2023</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../_static/logo_stacked.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">INF 133 Fall 2023</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../index.html">
                    User Interaction Software
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Assignments
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/a0.html">
   Assignment 0
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/a1.html">
   Assignment 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/a2.html">
   Assignment 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/a3.html">
   Assignment 3
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/a4.html">
   Assignment 4
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../assignments/a5.html">
   Assignment 5
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Weekly Notes
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk1.html">
   Week 1 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk2.html">
   Week 2 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk3.html">
   Week 3 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk4.html">
   Week 4 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk5.html">
   Week 5 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk6.html">
   Week 6 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk7.html">
   Week 7 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk8.html">
   Week 8 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk9.html">
   Week 9 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../notes/wk10.html">
   Week 10 Notes
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Course Resources
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../resources.html">
   Resources
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../_sources/reveal/node_modules/node-fetch/README.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#motivation">
   Motivation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#features">
   Features
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#difference-from-client-side-fetch">
   Difference from client-side fetch
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loading-and-configuring-the-module">
   Loading and configuring the module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#common-usage">
   Common Usage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#plain-text-or-html">
     Plain text or HTML
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#json">
     JSON
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#simple-post">
     Simple Post
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#post-with-json">
     Post with JSON
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#post-with-form-parameters">
     Post with form parameters
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#handling-exceptions">
     Handling exceptions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#handling-client-and-server-errors">
     Handling client and server errors
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#advanced-usage">
   Advanced Usage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#streams">
     Streams
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#buffer">
     Buffer
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#accessing-headers-and-other-meta-data">
     Accessing Headers and other Meta data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#extract-set-cookie-header">
     Extract Set-Cookie Header
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#post-data-using-a-file-stream">
     Post data using a file stream
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#post-with-form-data-detect-multipart">
     Post with form-data (detect multipart)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#request-cancellation-with-abortsignal">
     Request cancellation with AbortSignal
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#api">
   API
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#fetch-url-options">
     fetch(url[, options])
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#options">
     Options
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#default-headers">
       Default Headers
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#custom-agent">
       Custom Agent
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#class-request">
     Class: Request
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#new-request-input-options">
       new Request(input[, options])
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#class-response">
     Class: Response
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#new-response-body-options">
       new Response([body[, options]])
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#response-ok">
       response.ok
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#response-redirected">
       response.redirected
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#class-headers">
     Class: Headers
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#new-headers-init">
       new Headers([init])
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#interface-body">
     Interface: Body
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#body-body">
       body.body
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#body-bodyused">
       body.bodyUsed
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#body-arraybuffer">
       body.arrayBuffer()
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#body-blob">
       body.blob()
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#body-json">
       body.json()
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#body-text">
       body.text()
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#body-buffer">
       body.buffer()
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#body-textconverted">
       body.textConverted()
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#class-fetcherror">
     Class: FetchError
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#class-aborterror">
     Class: AbortError
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#acknowledgement">
   Acknowledgement
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#license">
   License
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>node-fetch</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#motivation">
   Motivation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#features">
   Features
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#difference-from-client-side-fetch">
   Difference from client-side fetch
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loading-and-configuring-the-module">
   Loading and configuring the module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#common-usage">
   Common Usage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#plain-text-or-html">
     Plain text or HTML
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#json">
     JSON
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#simple-post">
     Simple Post
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#post-with-json">
     Post with JSON
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#post-with-form-parameters">
     Post with form parameters
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#handling-exceptions">
     Handling exceptions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#handling-client-and-server-errors">
     Handling client and server errors
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#advanced-usage">
   Advanced Usage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#streams">
     Streams
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#buffer">
     Buffer
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#accessing-headers-and-other-meta-data">
     Accessing Headers and other Meta data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#extract-set-cookie-header">
     Extract Set-Cookie Header
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#post-data-using-a-file-stream">
     Post data using a file stream
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#post-with-form-data-detect-multipart">
     Post with form-data (detect multipart)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#request-cancellation-with-abortsignal">
     Request cancellation with AbortSignal
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#api">
   API
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#fetch-url-options">
     fetch(url[, options])
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#options">
     Options
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#default-headers">
       Default Headers
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#custom-agent">
       Custom Agent
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#class-request">
     Class: Request
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#new-request-input-options">
       new Request(input[, options])
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#class-response">
     Class: Response
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#new-response-body-options">
       new Response([body[, options]])
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#response-ok">
       response.ok
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#response-redirected">
       response.redirected
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#class-headers">
     Class: Headers
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#new-headers-init">
       new Headers([init])
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#interface-body">
     Interface: Body
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#body-body">
       body.body
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#body-bodyused">
       body.bodyUsed
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#body-arraybuffer">
       body.arrayBuffer()
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#body-blob">
       body.blob()
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#body-json">
       body.json()
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#body-text">
       body.text()
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#body-buffer">
       body.buffer()
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#body-textconverted">
       body.textConverted()
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#class-fetcherror">
     Class: FetchError
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#class-aborterror">
     Class: AbortError
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#acknowledgement">
   Acknowledgement
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#license">
   License
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="node-fetch">
<h1>node-fetch<a class="headerlink" href="#node-fetch" title="Permalink to this headline">#</a></h1>
<p><a class="reference external" href="https://www.npmjs.com/package/node-fetch"><img alt="npm version" src="https://flat.badgen.net/npm/v/node-fetch" /></a>
<a class="reference external" href="https://travis-ci.org/bitinn/node-fetch"><img alt="build status" src="https://flat.badgen.net/travis/bitinn/node-fetch" /></a>
<a class="reference external" href="https://codecov.io/gh/bitinn/node-fetch"><img alt="coverage status" src="https://flat.badgen.net/codecov/c/github/bitinn/node-fetch/master" /></a>
<a class="reference external" href="https://packagephobia.now.sh/result?p=node-fetch"><img alt="install size" src="https://flat.badgen.net/packagephobia/install/node-fetch" /></a>
<a class="reference external" href="https://discord.gg/Zxbndcm"><img alt="Discord" src="https://img.shields.io/discord/619915844268326952?color=%237289DA&amp;label=Discord&amp;style=flat-square" /></a></p>
<p>A light-weight module that brings <code class="docutils literal notranslate"><span class="pre">window.fetch</span></code> to Node.js</p>
<p>(We are looking for <a class="reference external" href="https://github.com/bitinn/node-fetch/issues/567">v2 maintainers and collaborators</a>)</p>
<p><a class="reference external" href="https://opencollective.com/node-fetch"><img alt="Backers" src="https://opencollective.com/node-fetch/backers.svg" /></a></p>
<!-- TOC -->
<ul class="simple">
<li><p><a class="reference external" href="#motivation">Motivation</a></p></li>
<li><p><a class="reference external" href="#features">Features</a></p></li>
<li><p><a class="reference external" href="#difference-from-client-side-fetch">Difference from client-side fetch</a></p></li>
<li><p><a class="reference external" href="#installation">Installation</a></p></li>
<li><p><a class="reference external" href="#loading-and-configuring-the-module">Loading and configuring the module</a></p></li>
<li><p><a class="reference external" href="#common-usage">Common Usage</a></p>
<ul>
<li><p><a class="reference external" href="#plain-text-or-html">Plain text or HTML</a></p></li>
<li><p><a class="reference external" href="#json">JSON</a></p></li>
<li><p><a class="reference external" href="#simple-post">Simple Post</a></p></li>
<li><p><a class="reference external" href="#post-with-json">Post with JSON</a></p></li>
<li><p><a class="reference external" href="#post-with-form-parameters">Post with form parameters</a></p></li>
<li><p><a class="reference external" href="#handling-exceptions">Handling exceptions</a></p></li>
<li><p><a class="reference external" href="#handling-client-and-server-errors">Handling client and server errors</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#advanced-usage">Advanced Usage</a></p>
<ul>
<li><p><a class="reference external" href="#streams">Streams</a></p></li>
<li><p><a class="reference external" href="#buffer">Buffer</a></p></li>
<li><p><a class="reference external" href="#accessing-headers-and-other-meta-data">Accessing Headers and other Meta data</a></p></li>
<li><p><a class="reference external" href="#extract-set-cookie-header">Extract Set-Cookie Header</a></p></li>
<li><p><a class="reference external" href="#post-data-using-a-file-stream">Post data using a file stream</a></p></li>
<li><p><a class="reference external" href="#post-with-form-data-detect-multipart">Post with form-data (detect multipart)</a></p></li>
<li><p><a class="reference external" href="#request-cancellation-with-abortsignal">Request cancellation with AbortSignal</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#api">API</a></p>
<ul>
<li><p><a class="reference external" href="#fetchurl-options">fetch(url[, options])</a></p></li>
<li><p><a class="reference external" href="#options">Options</a></p></li>
<li><p><a class="reference external" href="#class-request">Class: Request</a></p></li>
<li><p><a class="reference external" href="#class-response">Class: Response</a></p></li>
<li><p><a class="reference external" href="#class-headers">Class: Headers</a></p></li>
<li><p><a class="reference external" href="#interface-body">Interface: Body</a></p></li>
<li><p><a class="reference external" href="#class-fetcherror">Class: FetchError</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#license">License</a></p></li>
<li><p><a class="reference external" href="#acknowledgement">Acknowledgement</a></p></li>
</ul>
<!-- /TOC -->
<section id="motivation">
<h2>Motivation<a class="headerlink" href="#motivation" title="Permalink to this headline">#</a></h2>
<p>Instead of implementing <code class="docutils literal notranslate"><span class="pre">XMLHttpRequest</span></code> in Node.js to run browser-specific <a class="reference external" href="https://github.com/github/fetch">Fetch polyfill</a>, why not go from native <code class="docutils literal notranslate"><span class="pre">http</span></code> to <code class="docutils literal notranslate"><span class="pre">fetch</span></code> API directly? Hence, <code class="docutils literal notranslate"><span class="pre">node-fetch</span></code>, minimal code for a <code class="docutils literal notranslate"><span class="pre">window.fetch</span></code> compatible API on Node.js runtime.</p>
<p>See Matt Andrews’ <a class="reference external" href="https://github.com/matthew-andrews/isomorphic-fetch">isomorphic-fetch</a> or Leonardo Quixada’s <a class="reference external" href="https://github.com/lquixada/cross-fetch">cross-fetch</a> for isomorphic usage (exports <code class="docutils literal notranslate"><span class="pre">node-fetch</span></code> for server-side, <code class="docutils literal notranslate"><span class="pre">whatwg-fetch</span></code> for client-side).</p>
</section>
<section id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>Stay consistent with <code class="docutils literal notranslate"><span class="pre">window.fetch</span></code> API.</p></li>
<li><p>Make conscious trade-off when following <a class="reference external" href="https://fetch.spec.whatwg.org/">WHATWG fetch spec</a> and <a class="reference external" href="https://streams.spec.whatwg.org/">stream spec</a> implementation details, document known differences.</p></li>
<li><p>Use native promise but allow substituting it with [insert your favorite promise library].</p></li>
<li><p>Use native Node streams for body on both request and response.</p></li>
<li><p>Decode content encoding (gzip/deflate) properly and convert string output (such as <code class="docutils literal notranslate"><span class="pre">res.text()</span></code> and <code class="docutils literal notranslate"><span class="pre">res.json()</span></code>) to UTF-8 automatically.</p></li>
<li><p>Useful extensions such as timeout, redirect limit, response size limit, <span class="xref myst">explicit errors</span> for troubleshooting.</p></li>
</ul>
</section>
<section id="difference-from-client-side-fetch">
<h2>Difference from client-side fetch<a class="headerlink" href="#difference-from-client-side-fetch" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>See <span class="xref myst">Known Differences</span> for details.</p></li>
<li><p>If you happen to use a missing feature that <code class="docutils literal notranslate"><span class="pre">window.fetch</span></code> offers, feel free to open an issue.</p></li>
<li><p>Pull requests are welcomed too!</p></li>
</ul>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">#</a></h2>
<p>Current stable release (<code class="docutils literal notranslate"><span class="pre">2.x</span></code>)</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>npm<span class="w"> </span>install<span class="w"> </span>node-fetch
</pre></div>
</div>
</section>
<section id="loading-and-configuring-the-module">
<h2>Loading and configuring the module<a class="headerlink" href="#loading-and-configuring-the-module" title="Permalink to this headline">#</a></h2>
<p>We suggest you load the module via <code class="docutils literal notranslate"><span class="pre">require</span></code> until the stabilization of ES modules in node:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">fetch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;node-fetch&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>If you are using a Promise library other than native, set it through <code class="docutils literal notranslate"><span class="pre">fetch.Promise</span></code>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">Bluebird</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;bluebird&#39;</span><span class="p">);</span>

<span class="nx">fetch</span><span class="p">.</span><span class="nb">Promise</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Bluebird</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="common-usage">
<h2>Common Usage<a class="headerlink" href="#common-usage" title="Permalink to this headline">#</a></h2>
<p>NOTE: The documentation below is up-to-date with <code class="docutils literal notranslate"><span class="pre">2.x</span></code> releases; see the <a class="reference external" href="https://github.com/bitinn/node-fetch/blob/1.x/README.md"><code class="docutils literal notranslate"><span class="pre">1.x</span></code> readme</a>, <a class="reference external" href="https://github.com/bitinn/node-fetch/blob/1.x/CHANGELOG.md">changelog</a> and <span class="xref myst">2.x upgrade guide</span> for the differences.</p>
<section id="plain-text-or-html">
<h3>Plain text or HTML<a class="headerlink" href="#plain-text-or-html" title="Permalink to this headline">#</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;https://github.com/&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">body</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">));</span>
</pre></div>
</div>
</section>
<section id="json">
<h3>JSON<a class="headerlink" href="#json" title="Permalink to this headline">#</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;https://api.github.com/users/github&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>
</pre></div>
</div>
</section>
<section id="simple-post">
<h3>Simple Post<a class="headerlink" href="#simple-post" title="Permalink to this headline">#</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;https://httpbin.org/post&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;a=1&#39;</span><span class="w"> </span><span class="p">})</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span><span class="w"> </span><span class="c1">// expecting a json response</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>
</pre></div>
</div>
</section>
<section id="post-with-json">
<h3>Post with JSON<a class="headerlink" href="#post-with-json" title="Permalink to this headline">#</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="p">};</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;https://httpbin.org/post&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;post&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="nx">body</span><span class="o">:</span><span class="w">    </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">body</span><span class="p">),</span>
<span class="w">        </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;application/json&#39;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">})</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>
</pre></div>
</div>
</section>
<section id="post-with-form-parameters">
<h3>Post with form parameters<a class="headerlink" href="#post-with-form-parameters" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">URLSearchParams</span></code> is available in Node.js as of v7.5.0. See <a class="reference external" href="https://nodejs.org/api/url.html#url_class_urlsearchparams">official documentation</a> for more usage methods.</p>
<p>NOTE: The <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> header is only set automatically to <code class="docutils literal notranslate"><span class="pre">x-www-form-urlencoded</span></code> when an instance of <code class="docutils literal notranslate"><span class="pre">URLSearchParams</span></code> is given as such:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">URLSearchParams</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">URLSearchParams</span><span class="p">();</span>
<span class="nx">params</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;https://httpbin.org/post&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nx">params</span><span class="w"> </span><span class="p">})</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>
</pre></div>
</div>
</section>
<section id="handling-exceptions">
<h3>Handling exceptions<a class="headerlink" href="#handling-exceptions" title="Permalink to this headline">#</a></h3>
<p>NOTE: 3xx-5xx responses are <em>NOT</em> exceptions and should be handled in <code class="docutils literal notranslate"><span class="pre">then()</span></code>; see the next section for more information.</p>
<p>Adding a catch to the fetch promise chain will catch <em>all</em> exceptions, such as errors originating from node core libraries, network errors and operational errors, which are instances of FetchError. See the <span class="xref myst">error handling document</span>  for more details.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;https://domain.invalid/&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
</pre></div>
</div>
</section>
<section id="handling-client-and-server-errors">
<h3>Handling client and server errors<a class="headerlink" href="#handling-client-and-server-errors" title="Permalink to this headline">#</a></h3>
<p>It is common to create a helper function to check that the response contains no client (4xx) or server (5xx) error responses:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">checkStatus</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// res.status &gt;= 200 &amp;&amp; res.status &lt; 300</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">res</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="nx">MyCustomError</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">statusText</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;https://httpbin.org/status/400&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">checkStatus</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;will not get here...&#39;</span><span class="p">))</span>
</pre></div>
</div>
</section>
</section>
<section id="advanced-usage">
<h2>Advanced Usage<a class="headerlink" href="#advanced-usage" title="Permalink to this headline">#</a></h2>
<section id="streams">
<h3>Streams<a class="headerlink" href="#streams" title="Permalink to this headline">#</a></h3>
<p>The “Node.js way” is to use streams when possible:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;https://assets-cdn.github.com/images/modules/logos_page/Octocat.png&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">dest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="s1">&#39;./octocat.png&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="nx">res</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">dest</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
</pre></div>
</div>
</section>
<section id="buffer">
<h3>Buffer<a class="headerlink" href="#buffer" title="Permalink to this headline">#</a></h3>
<p>If you prefer to cache binary data in full, use buffer(). (NOTE: <code class="docutils literal notranslate"><span class="pre">buffer()</span></code> is a <code class="docutils literal notranslate"><span class="pre">node-fetch</span></code>-only API)</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">fileType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;file-type&#39;</span><span class="p">);</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;https://assets-cdn.github.com/images/modules/logos_page/Octocat.png&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">buffer</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">buffer</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">fileType</span><span class="p">(</span><span class="nx">buffer</span><span class="p">))</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">type</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* ... */</span><span class="w"> </span><span class="p">});</span>
</pre></div>
</div>
</section>
<section id="accessing-headers-and-other-meta-data">
<h3>Accessing Headers and other Meta data<a class="headerlink" href="#accessing-headers-and-other-meta-data" title="Permalink to this headline">#</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;https://github.com/&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">ok</span><span class="p">);</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">statusText</span><span class="p">);</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">raw</span><span class="p">());</span>
<span class="w">        </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;content-type&#39;</span><span class="p">));</span>
<span class="w">    </span><span class="p">});</span>
</pre></div>
</div>
</section>
<section id="extract-set-cookie-header">
<h3>Extract Set-Cookie Header<a class="headerlink" href="#extract-set-cookie-header" title="Permalink to this headline">#</a></h3>
<p>Unlike browsers, you can access raw <code class="docutils literal notranslate"><span class="pre">Set-Cookie</span></code> headers manually using <code class="docutils literal notranslate"><span class="pre">Headers.raw()</span></code>. This is a <code class="docutils literal notranslate"><span class="pre">node-fetch</span></code> only API.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// returns an array of values, instead of a string of comma-separated values</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">raw</span><span class="p">()[</span><span class="s1">&#39;set-cookie&#39;</span><span class="p">]);</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
<section id="post-data-using-a-file-stream">
<h3>Post data using a file stream<a class="headerlink" href="#post-data-using-a-file-stream" title="Permalink to this headline">#</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createReadStream</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;input.txt&#39;</span><span class="p">);</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;https://httpbin.org/post&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nx">stream</span><span class="w"> </span><span class="p">})</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>
</pre></div>
</div>
</section>
<section id="post-with-form-data-detect-multipart">
<h3>Post with form-data (detect multipart)<a class="headerlink" href="#post-with-form-data-detect-multipart" title="Permalink to this headline">#</a></h3>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">FormData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;form-data&#39;</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">form</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormData</span><span class="p">();</span>
<span class="nx">form</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;https://httpbin.org/post&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nx">form</span><span class="w"> </span><span class="p">})</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>

<span class="c1">// OR, using custom headers</span>
<span class="c1">// NOTE: getHeaders() is non-standard API</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">form</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormData</span><span class="p">();</span>
<span class="nx">form</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nx">form</span><span class="p">,</span>
<span class="w">    </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="nx">form</span><span class="p">.</span><span class="nx">getHeaders</span><span class="p">()</span>
<span class="p">}</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;https://httpbin.org/post&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">json</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">json</span><span class="p">));</span>
</pre></div>
</div>
</section>
<section id="request-cancellation-with-abortsignal">
<h3>Request cancellation with AbortSignal<a class="headerlink" href="#request-cancellation-with-abortsignal" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><p>NOTE: You may cancel streamed requests only on Node &gt;= v8.0.0</p>
</div></blockquote>
<p>You may cancel requests with <code class="docutils literal notranslate"><span class="pre">AbortController</span></code>. A suggested implementation is <a class="reference external" href="https://www.npmjs.com/package/abort-controller"><code class="docutils literal notranslate"><span class="pre">abort-controller</span></code></a>.</p>
<p>An example of timing out a request after 150ms could be achieved as the following:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nx">AbortController</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;abort-controller&#39;</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">controller</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">AbortController</span><span class="p">();</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">setTimeout</span><span class="p">(</span>
<span class="w">  </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">controller</span><span class="p">.</span><span class="nx">abort</span><span class="p">();</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="mf">150</span><span class="p">,</span>
<span class="p">);</span>

<span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">signal</span><span class="o">:</span><span class="w"> </span><span class="nx">controller</span><span class="p">.</span><span class="nx">signal</span><span class="w"> </span><span class="p">})</span>
<span class="w">  </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="w">  </span><span class="p">.</span><span class="nx">then</span><span class="p">(</span>
<span class="w">    </span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">useData</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nx">err</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">name</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;AbortError&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// request was aborted</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">  </span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="k">finally</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timeout</span><span class="p">);</span>
<span class="w">  </span><span class="p">});</span>
</pre></div>
</div>
<p>See <a class="reference external" href="https://github.com/bitinn/node-fetch/blob/master/test/test.js">test cases</a> for more examples.</p>
</section>
</section>
<section id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">#</a></h2>
<section id="fetch-url-options">
<h3>fetch(url[, options])<a class="headerlink" href="#fetch-url-options" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">url</span></code> A string representing the URL for fetching</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code> <a class="reference external" href="#fetch-options">Options</a> for the HTTP(S) request</p></li>
<li><p>Returns: <code>Promise&lt;<a class="reference external" href="#class-response">Response</a>&gt;</code></p></li>
</ul>
<p>Perform an HTTP(S) fetch.</p>
<p><code class="docutils literal notranslate"><span class="pre">url</span></code> should be an absolute url, such as <code class="docutils literal notranslate"><span class="pre">https://example.com/</span></code>. A path-relative URL (<code class="docutils literal notranslate"><span class="pre">/file/under/root</span></code>) or protocol-relative URL (<code class="docutils literal notranslate"><span class="pre">//can-be-http-or-https.com/</span></code>) will result in a rejected <code class="docutils literal notranslate"><span class="pre">Promise</span></code>.</p>
<p><a id="fetch-options"></a></p>
</section>
<section id="options">
<h3>Options<a class="headerlink" href="#options" title="Permalink to this headline">#</a></h3>
<p>The default values are shown after each option key.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="c1">// These properties are part of the Fetch Standard</span>
<span class="w">    </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;GET&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{},</span><span class="w">        </span><span class="c1">// request headers. format is the identical to that accepted by the Headers constructor (see below)</span>
<span class="w">    </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">         </span><span class="c1">// request body. can be null, a string, a Buffer, a Blob, or a Node.js Readable stream</span>
<span class="w">    </span><span class="nx">redirect</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;follow&#39;</span><span class="p">,</span><span class="w"> </span><span class="c1">// set to `manual` to extract redirect headers, `error` to reject redirect</span>
<span class="w">    </span><span class="nx">signal</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">       </span><span class="c1">// pass an instance of AbortSignal to optionally abort requests</span>

<span class="w">    </span><span class="c1">// The following properties are node-fetch extensions</span>
<span class="w">    </span><span class="nx">follow</span><span class="o">:</span><span class="w"> </span><span class="mf">20</span><span class="p">,</span><span class="w">         </span><span class="c1">// maximum redirect count. 0 to not follow redirect</span>
<span class="w">    </span><span class="nx">timeout</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">         </span><span class="c1">// req/res timeout in ms, it resets on redirect. 0 to disable (OS limit applies). Signal is recommended instead.</span>
<span class="w">    </span><span class="nx">compress</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">     </span><span class="c1">// support gzip/deflate content encoding. false to disable</span>
<span class="w">    </span><span class="nx">size</span><span class="o">:</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w">            </span><span class="c1">// maximum response body size in bytes. 0 to disable</span>
<span class="w">    </span><span class="nx">agent</span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="w">         </span><span class="c1">// http(s).Agent instance or function that returns an instance (see below)</span>
<span class="p">}</span>
</pre></div>
</div>
<section id="default-headers">
<h4>Default Headers<a class="headerlink" href="#default-headers" title="Permalink to this headline">#</a></h4>
<p>If no values are set, the following request headers will be sent automatically:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Header</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Accept-Encoding</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">gzip,deflate</span></code> <em>(when <code class="docutils literal notranslate"><span class="pre">options.compress</span> <span class="pre">===</span> <span class="pre">true</span></code>)</em></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Accept</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">*/*</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Connection</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">close</span></code> <em>(when no <code class="docutils literal notranslate"><span class="pre">options.agent</span></code> is present)</em></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Content-Length</span></code></p></td>
<td><p><em>(automatically calculated, if possible)</em></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Transfer-Encoding</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">chunked</span></code> <em>(when <code class="docutils literal notranslate"><span class="pre">req.body</span></code> is a stream)</em></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">User-Agent</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">node-fetch/1.0</span> <span class="pre">(+https://github.com/bitinn/node-fetch)</span></code></p></td>
</tr>
</tbody>
</table>
<p>Note: when <code class="docutils literal notranslate"><span class="pre">body</span></code> is a <code class="docutils literal notranslate"><span class="pre">Stream</span></code>, <code class="docutils literal notranslate"><span class="pre">Content-Length</span></code> is not set automatically.</p>
</section>
<section id="custom-agent">
<h4>Custom Agent<a class="headerlink" href="#custom-agent" title="Permalink to this headline">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">agent</span></code> option allows you to specify networking related options which are out of the scope of Fetch, including and not limited to the following:</p>
<ul class="simple">
<li><p>Support self-signed certificate</p></li>
<li><p>Use only IPv4 or IPv6</p></li>
<li><p>Custom DNS Lookup</p></li>
</ul>
<p>See <a class="reference external" href="https://nodejs.org/api/http.html#http_new_agent_options"><code class="docutils literal notranslate"><span class="pre">http.Agent</span></code></a> for more information.</p>
<p>In addition, the <code class="docutils literal notranslate"><span class="pre">agent</span></code> option accepts a function that returns <code class="docutils literal notranslate"><span class="pre">http</span></code>(s)<code class="docutils literal notranslate"><span class="pre">.Agent</span></code> instance given current <a class="reference external" href="https://nodejs.org/api/url.html">URL</a>, this is useful during a redirection chain across HTTP and HTTPS protocol.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">httpAgent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">Agent</span><span class="p">({</span>
<span class="w">    </span><span class="nx">keepAlive</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="p">});</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">httpsAgent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">https</span><span class="p">.</span><span class="nx">Agent</span><span class="p">({</span>
<span class="w">    </span><span class="nx">keepAlive</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span>
<span class="p">});</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">agent</span><span class="o">:</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">_parsedURL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">_parsedURL</span><span class="p">.</span><span class="nx">protocol</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;http:&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">httpAgent</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">httpsAgent</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><a id="class-request"></a></p>
</section>
</section>
<section id="class-request">
<h3>Class: Request<a class="headerlink" href="#class-request" title="Permalink to this headline">#</a></h3>
<p>An HTTP(S) request containing information about URL, method, headers, and the body. This class implements the <a class="reference external" href="#iface-body">Body</a> interface.</p>
<p>Due to the nature of Node.js, the following properties are not implemented at this moment:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">destination</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">referrer</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">referrerPolicy</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mode</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">credentials</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cache</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">integrity</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">keepalive</span></code></p></li>
</ul>
<p>The following node-fetch extension properties are provided:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">follow</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">compress</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">counter</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">agent</span></code></p></li>
</ul>
<p>See <a class="reference external" href="#fetch-options">options</a> for exact meaning of these extensions.</p>
<section id="new-request-input-options">
<h4>new Request(input[, options])<a class="headerlink" href="#new-request-input-options" title="Permalink to this headline">#</a></h4>
<p><small><em>(spec-compliant)</em></small></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">input</span></code> A string representing a URL, or another <code class="docutils literal notranslate"><span class="pre">Request</span></code> (which will be cloned)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code> [Options][#fetch-options] for the HTTP(S) request</p></li>
</ul>
<p>Constructs a new <code class="docutils literal notranslate"><span class="pre">Request</span></code> object. The constructor is identical to that in the <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/Request/Request">browser</a>.</p>
<p>In most cases, directly <code class="docutils literal notranslate"><span class="pre">fetch(url,</span> <span class="pre">options)</span></code> is simpler than creating a <code class="docutils literal notranslate"><span class="pre">Request</span></code> object.</p>
<p><a id="class-response"></a></p>
</section>
</section>
<section id="class-response">
<h3>Class: Response<a class="headerlink" href="#class-response" title="Permalink to this headline">#</a></h3>
<p>An HTTP(S) response. This class implements the <a class="reference external" href="#iface-body">Body</a> interface.</p>
<p>The following properties are not implemented in node-fetch at this moment:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Response.error()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Response.redirect()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trailer</span></code></p></li>
</ul>
<section id="new-response-body-options">
<h4>new Response([body[, options]])<a class="headerlink" href="#new-response-body-options" title="Permalink to this headline">#</a></h4>
<p><small><em>(spec-compliant)</em></small></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">body</span></code> A <code class="docutils literal notranslate"><span class="pre">String</span></code> or <a class="reference external" href="https://nodejs.org/api/stream.html#stream_readable_streams"><code class="docutils literal notranslate"><span class="pre">Readable</span></code> stream</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code> A <a class="reference external" href="https://fetch.spec.whatwg.org/#responseinit"><code class="docutils literal notranslate"><span class="pre">ResponseInit</span></code></a> options dictionary</p></li>
</ul>
<p>Constructs a new <code class="docutils literal notranslate"><span class="pre">Response</span></code> object. The constructor is identical to that in the <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/Response/Response">browser</a>.</p>
<p>Because Node.js does not implement service workers (for which this class was designed), one rarely has to construct a <code class="docutils literal notranslate"><span class="pre">Response</span></code> directly.</p>
</section>
<section id="response-ok">
<h4>response.ok<a class="headerlink" href="#response-ok" title="Permalink to this headline">#</a></h4>
<p><small><em>(spec-compliant)</em></small></p>
<p>Convenience property representing if the request ended normally. Will evaluate to true if the response status was greater than or equal to 200 but smaller than 300.</p>
</section>
<section id="response-redirected">
<h4>response.redirected<a class="headerlink" href="#response-redirected" title="Permalink to this headline">#</a></h4>
<p><small><em>(spec-compliant)</em></small></p>
<p>Convenience property representing if the request has been redirected at least once. Will evaluate to true if the internal redirect counter is greater than 0.</p>
<p><a id="class-headers"></a></p>
</section>
</section>
<section id="class-headers">
<h3>Class: Headers<a class="headerlink" href="#class-headers" title="Permalink to this headline">#</a></h3>
<p>This class allows manipulating and iterating over a set of HTTP headers. All methods specified in the <a class="reference external" href="https://fetch.spec.whatwg.org/">Fetch Standard</a> are implemented.</p>
<section id="new-headers-init">
<h4>new Headers([init])<a class="headerlink" href="#new-headers-init" title="Permalink to this headline">#</a></h4>
<p><small><em>(spec-compliant)</em></small></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">init</span></code> Optional argument to pre-fill the <code class="docutils literal notranslate"><span class="pre">Headers</span></code> object</p></li>
</ul>
<p>Construct a new <code class="docutils literal notranslate"><span class="pre">Headers</span></code> object. <code class="docutils literal notranslate"><span class="pre">init</span></code> can be either <code class="docutils literal notranslate"><span class="pre">null</span></code>, a <code class="docutils literal notranslate"><span class="pre">Headers</span></code> object, an key-value map object or any iterable object.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// Example adapted from https://fetch.spec.whatwg.org/#example-headers-class</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">meta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="s1">&#39;Content-Type&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;text/xml&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="s1">&#39;Breaking-Bad&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&lt;3&#39;</span>
<span class="p">};</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">headers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Headers</span><span class="p">(</span><span class="nx">meta</span><span class="p">);</span>

<span class="c1">// The above is equivalent to</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">meta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="p">[</span><span class="w"> </span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;text/xml&#39;</span><span class="w"> </span><span class="p">],</span>
<span class="w">  </span><span class="p">[</span><span class="w"> </span><span class="s1">&#39;Breaking-Bad&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&lt;3&#39;</span><span class="w"> </span><span class="p">]</span>
<span class="p">];</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">headers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Headers</span><span class="p">(</span><span class="nx">meta</span><span class="p">);</span>

<span class="c1">// You can in fact use any iterable objects, like a Map or even another Headers</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">meta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">();</span>
<span class="nx">meta</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>
<span class="nx">meta</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;Breaking-Bad&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&lt;3&#39;</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">headers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Headers</span><span class="p">(</span><span class="nx">meta</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">copyOfHeaders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Headers</span><span class="p">(</span><span class="nx">headers</span><span class="p">);</span>
</pre></div>
</div>
<p><a id="iface-body"></a></p>
</section>
</section>
<section id="interface-body">
<h3>Interface: Body<a class="headerlink" href="#interface-body" title="Permalink to this headline">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Body</span></code> is an abstract interface with methods that are applicable to both <code class="docutils literal notranslate"><span class="pre">Request</span></code> and <code class="docutils literal notranslate"><span class="pre">Response</span></code> classes.</p>
<p>The following methods are not yet implemented in node-fetch at this moment:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">formData()</span></code></p></li>
</ul>
<section id="body-body">
<h4>body.body<a class="headerlink" href="#body-body" title="Permalink to this headline">#</a></h4>
<p><small><em>(deviation from spec)</em></small></p>
<ul class="simple">
<li><p>Node.js <a class="reference external" href="https://nodejs.org/api/stream.html#stream_readable_streams"><code class="docutils literal notranslate"><span class="pre">Readable</span></code> stream</a></p></li>
</ul>
<p>Data are encapsulated in the <code class="docutils literal notranslate"><span class="pre">Body</span></code> object. Note that while the <a class="reference external" href="https://fetch.spec.whatwg.org/">Fetch Standard</a> requires the property to always be a WHATWG <code class="docutils literal notranslate"><span class="pre">ReadableStream</span></code>, in node-fetch it is a Node.js <a class="reference external" href="https://nodejs.org/api/stream.html#stream_readable_streams"><code class="docutils literal notranslate"><span class="pre">Readable</span></code> stream</a>.</p>
</section>
<section id="body-bodyused">
<h4>body.bodyUsed<a class="headerlink" href="#body-bodyused" title="Permalink to this headline">#</a></h4>
<p><small><em>(spec-compliant)</em></small></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Boolean</span></code></p></li>
</ul>
<p>A boolean property for if this body has been consumed. Per the specs, a consumed body cannot be used again.</p>
</section>
<section id="body-arraybuffer">
<h4>body.arrayBuffer()<a class="headerlink" href="#body-arraybuffer" title="Permalink to this headline">#</a></h4>
</section>
<section id="body-blob">
<h4>body.blob()<a class="headerlink" href="#body-blob" title="Permalink to this headline">#</a></h4>
</section>
<section id="body-json">
<h4>body.json()<a class="headerlink" href="#body-json" title="Permalink to this headline">#</a></h4>
</section>
<section id="body-text">
<h4>body.text()<a class="headerlink" href="#body-text" title="Permalink to this headline">#</a></h4>
<p><small><em>(spec-compliant)</em></small></p>
<ul class="simple">
<li><p>Returns: <code>Promise</code></p></li>
</ul>
<p>Consume the body and return a promise that will resolve to one of these formats.</p>
</section>
<section id="body-buffer">
<h4>body.buffer()<a class="headerlink" href="#body-buffer" title="Permalink to this headline">#</a></h4>
<p><small><em>(node-fetch extension)</em></small></p>
<ul class="simple">
<li><p>Returns: <code>Promise&lt;Buffer&gt;</code></p></li>
</ul>
<p>Consume the body and return a promise that will resolve to a Buffer.</p>
</section>
<section id="body-textconverted">
<h4>body.textConverted()<a class="headerlink" href="#body-textconverted" title="Permalink to this headline">#</a></h4>
<p><small><em>(node-fetch extension)</em></small></p>
<ul class="simple">
<li><p>Returns: <code>Promise&lt;String&gt;</code></p></li>
</ul>
<p>Identical to <code class="docutils literal notranslate"><span class="pre">body.text()</span></code>, except instead of always converting to UTF-8, encoding sniffing will be performed and text converted to UTF-8 if possible.</p>
<p>(This API requires an optional dependency of the npm package <a class="reference external" href="https://www.npmjs.com/package/encoding">encoding</a>, which you need to install manually. <code class="docutils literal notranslate"><span class="pre">webpack</span></code> users may see <a class="reference external" href="https://github.com/bitinn/node-fetch/issues/412#issuecomment-379007792">a warning message</a> due to this optional dependency.)</p>
<p><a id="class-fetcherror"></a></p>
</section>
</section>
<section id="class-fetcherror">
<h3>Class: FetchError<a class="headerlink" href="#class-fetcherror" title="Permalink to this headline">#</a></h3>
<p><small><em>(node-fetch extension)</em></small></p>
<p>An operational error in the fetching process. See <a class="reference external" href="https://github.com/bitinn/node-fetch/blob/master/ERROR-HANDLING.md">ERROR-HANDLING.md</a> for more info.</p>
<p><a id="class-aborterror"></a></p>
</section>
<section id="class-aborterror">
<h3>Class: AbortError<a class="headerlink" href="#class-aborterror" title="Permalink to this headline">#</a></h3>
<p><small><em>(node-fetch extension)</em></small></p>
<p>An Error thrown when the request is aborted in response to an <code class="docutils literal notranslate"><span class="pre">AbortSignal</span></code>’s <code class="docutils literal notranslate"><span class="pre">abort</span></code> event. It has a <code class="docutils literal notranslate"><span class="pre">name</span></code> property of <code class="docutils literal notranslate"><span class="pre">AbortError</span></code>. See <a class="reference external" href="https://github.com/bitinn/node-fetch/blob/master/ERROR-HANDLING.md">ERROR-HANDLING.MD</a> for more info.</p>
</section>
</section>
<section id="acknowledgement">
<h2>Acknowledgement<a class="headerlink" href="#acknowledgement" title="Permalink to this headline">#</a></h2>
<p>Thanks to <a class="reference external" href="https://github.com/github/fetch">github/fetch</a> for providing a solid implementation reference.</p>
<p><code class="docutils literal notranslate"><span class="pre">node-fetch</span></code> v1 was maintained by <a class="reference external" href="https://github.com/bitinn">&#64;bitinn</a>; v2 was maintained by <a class="reference external" href="https://github.com/timothygu">&#64;TimothyGu</a>, <a class="reference external" href="https://github.com/bitinn">&#64;bitinn</a> and <a class="reference external" href="https://github.com/jimmywarting">&#64;jimmywarting</a>; v2 readme is written by <a class="reference external" href="https://github.com/jkantr">&#64;jkantr</a>.</p>
</section>
<section id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">#</a></h2>
<p>MIT</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./reveal/node_modules/node-fetch"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Mark S. Baldwin<br/>
  
      &copy; Copyright 2023.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>